/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/entries/h5peditor-3d-model-loader.js":
/*!**************************************************!*\
  !*** ./src/entries/h5peditor-3d-model-loader.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _styles_h5peditor_3d_model_loader_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../styles/h5peditor-3d-model-loader.css */ \"./src/styles/h5peditor-3d-model-loader.css\");\n/* harmony import */ var _scripts_h5peditor_3d_model_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../scripts/h5peditor-3d-model-loader */ \"./src/scripts/h5peditor-3d-model-loader.js\");\n\n // Load library\n\nH5PEditor = H5PEditor || {};\nH5PEditor.widgets.threeDModelLoader = _scripts_h5peditor_3d_model_loader__WEBPACK_IMPORTED_MODULE_1__.default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50cmllcy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWVkaXRvci0zZC1tb2RlbC1sb2FkZXIvLi9zcmMvZW50cmllcy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLmpzP2JjNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vc3R5bGVzL2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXIuY3NzXCI7XG5pbXBvcnQgVGhyZWVETW9kZWxMb2FkZXIgZnJvbSBcIi4uL3NjcmlwdHMvaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlclwiO1xuXG4vLyBMb2FkIGxpYnJhcnlcbkg1UEVkaXRvciA9IEg1UEVkaXRvciB8fCB7fTtcbkg1UEVkaXRvci53aWRnZXRzLnRocmVlRE1vZGVsTG9hZGVyID0gVGhyZWVETW9kZWxMb2FkZXI7XG4iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/entries/h5peditor-3d-model-loader.js\n");

/***/ }),

/***/ "./src/scripts/h5peditor-3d-model-loader-conversion-dropzone.js":
/*!**********************************************************************!*\
  !*** ./src/scripts/h5peditor-3d-model-loader-conversion-dropzone.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _h5peditor_3d_model_loader_gltf2glb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./h5peditor-3d-model-loader-gltf2glb.js */ \"./src/scripts/h5peditor-3d-model-loader-gltf2glb.js\");\n\n\nvar ThreeDModelLoaderConversionDropzone = /*#__PURE__*/function () {\n  /**\n   * Dropzone to convert folders with gltf assets to glb\n   * @class H5PEditor.ThreeDModelLoaderConversionDropzone\n   * @param {function} callback Callback for file or error.\n   */\n  function ThreeDModelLoaderConversionDropzone(callback) {\n    var _this = this;\n\n    this.callback = callback || function () {};\n\n    this.converter = this.converter || new _h5peditor_3d_model_loader_gltf2glb_js__WEBPACK_IMPORTED_MODULE_0__.default();\n    this.container = document.createElement('div');\n    this.container.classList.add('h5peditor-3d-model-loader-converter-container');\n    this.container.classList.add('h5peditor-3d-model-loader-display-none');\n    var dropzone = document.createElement('div');\n    dropzone.classList.add('h5peditor-3d-model-loader-converter-dropzone');\n    dropzone.innerText = H5PEditor.t('H5PEditor.ThreeDModelLoader', 'dropFolderHere');\n    dropzone.addEventListener('dragover', function (event) {\n      _this.handleDragOver(event);\n    }, false);\n    dropzone.addEventListener('drop', function (event) {\n      _this.handleDrop(event);\n    }, false);\n    this.container.appendChild(dropzone);\n  }\n  /**\n   * Get scene DOM.\n   * @return {HTMLElement} Scene DOM.\n   */\n\n\n  var _proto = ThreeDModelLoaderConversionDropzone.prototype;\n\n  _proto.getDOM = function getDOM() {\n    return this.container;\n  }\n  /**\n   * Show dropzone.\n   */\n  ;\n\n  _proto.show = function show() {\n    this.container.classList.remove('h5peditor-3d-model-loader-display-none');\n  }\n  /**\n   * Hide dropzone.\n   */\n  ;\n\n  _proto.hide = function hide() {\n    this.container.classList.add('h5peditor-3d-model-loader-display-none');\n  }\n  /**\n   * Handle dragover for converter dropzone.\n   * @param {Event} event DragOver event.\n   */\n  ;\n\n  _proto.handleDragOver = function handleDragOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'copy';\n  }\n  /**\n   * Handle drop on converter dropzone.\n   * @param {Event} event Drop event.\n   */\n  ;\n\n  _proto.handleDrop = function handleDrop(event) {\n    var _this2 = this;\n\n    event.stopPropagation();\n    event.preventDefault();\n    this.converter.convert(event.dataTransfer.items, function (result) {\n      _this2.callback(result);\n    });\n  };\n\n  return ThreeDModelLoaderConversionDropzone;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThreeDModelLoaderConversionDropzone);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLWNvbnZlcnNpb24tZHJvcHpvbmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtZWRpdG9yLTNkLW1vZGVsLWxvYWRlci8uL3NyYy9zY3JpcHRzL2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXItY29udmVyc2lvbi1kcm9wem9uZS5qcz83ZjI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUaHJlZURNb2RlbExvYWRlckdMVEYyR0xCIGZyb20gJy4vaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1nbHRmMmdsYi5qcyc7XG5cbmNsYXNzIFRocmVlRE1vZGVsTG9hZGVyQ29udmVyc2lvbkRyb3B6b25lIHtcbiAgLyoqXG4gICAqIERyb3B6b25lIHRvIGNvbnZlcnQgZm9sZGVycyB3aXRoIGdsdGYgYXNzZXRzIHRvIGdsYlxuICAgKiBAY2xhc3MgSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyQ29udmVyc2lvbkRyb3B6b25lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIGZvciBmaWxlIG9yIGVycm9yLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2sgfHwgKCgpID0+IHt9KTtcblxuICAgIHRoaXMuY29udmVydGVyID0gdGhpcy5jb252ZXJ0ZXIgfHwgbmV3IFRocmVlRE1vZGVsTG9hZGVyR0xURjJHTEIoKTtcblxuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1jb252ZXJ0ZXItY29udGFpbmVyJyk7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1kaXNwbGF5LW5vbmUnKTtcblxuICAgIGNvbnN0IGRyb3B6b25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZHJvcHpvbmUuY2xhc3NMaXN0LmFkZCgnaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1jb252ZXJ0ZXItZHJvcHpvbmUnKTtcbiAgICBkcm9wem9uZS5pbm5lclRleHQgPSBINVBFZGl0b3IudCgnSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyJywgJ2Ryb3BGb2xkZXJIZXJlJyk7XG5cbiAgICBkcm9wem9uZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVEcmFnT3ZlcihldmVudCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgZHJvcHpvbmUuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVEcm9wKGV2ZW50KTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChkcm9wem9uZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNjZW5lIERPTS5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFNjZW5lIERPTS5cbiAgICovXG4gIGdldERPTSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBkcm9wem9uZS5cbiAgICovXG4gIHNob3coKSB7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1kaXNwbGF5LW5vbmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIGRyb3B6b25lLlxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLWRpc3BsYXktbm9uZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBkcmFnb3ZlciBmb3IgY29udmVydGVyIGRyb3B6b25lLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBEcmFnT3ZlciBldmVudC5cbiAgICovXG4gIGhhbmRsZURyYWdPdmVyKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZHJvcCBvbiBjb252ZXJ0ZXIgZHJvcHpvbmUuXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IERyb3AgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVEcm9wKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHRoaXMuY29udmVydGVyLmNvbnZlcnQoZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zLCAocmVzdWx0KSA9PiB7XG4gICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGhyZWVETW9kZWxMb2FkZXJDb252ZXJzaW9uRHJvcHpvbmU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/h5peditor-3d-model-loader-conversion-dropzone.js\n");

/***/ }),

/***/ "./src/scripts/h5peditor-3d-model-loader-gltf2glb.js":
/*!***********************************************************!*\
  !*** ./src/scripts/h5peditor-3d-model-loader-gltf2glb.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * @class H5PEditor.ThreeDModelLoaderGLTF2GLB\n *\n * Based on makeglb by Saurabh Bhatia\n * https://github.com/sbtron/makeglb\n * The MIT License\n * Copyright (c) 2017 Saurabh Bhatia\n *\n */\nvar ThreeDModelLoaderGLTF2GLB = /*#__PURE__*/function () {\n  /**\n   * Constructor.\n   */\n  function ThreeDModelLoaderGLTF2GLB() {\n    this.remainingFilesToProcess = 0;\n    this.files = [];\n    this.fileblobs = [];\n    this.glbfilename;\n    this.gltf;\n    this.outputBuffers;\n    this.bufferMap;\n    this.bufferOffset;\n    this.gltfMimeTypes = {\n      'image/png': ['png'],\n      'image/jpeg': ['jpg', 'jpeg'],\n      'text/plain': ['glsl', 'vert', 'vs', 'frag', 'fs', 'txt'],\n      'image/vnd-ms.dds': ['dds']\n    };\n  }\n  /**\n   * Convert items to single glb file.\n   * @param {object[]} items Items.\n   * @param {function} callback Callback when done, will return file or error.\n   */\n\n\n  var _proto = ThreeDModelLoaderGLTF2GLB.prototype;\n\n  _proto.convert = function convert(items, callback) {\n    if (!items || typeof callback !== 'function') {\n      return;\n    }\n\n    this.callback = callback;\n    this.remainingFilesToProcess = items.length;\n\n    for (var i = 0; i < items.length; i++) {\n      var entry = void 0;\n\n      if (items[i].getAsEntry) {\n        entry = items[i].getAsEntry();\n      } else if (items[i].webkitGetAsEntry) {\n        entry = items[i].webkitGetAsEntry();\n      }\n\n      if (entry) {\n        if (entry.isFile) {\n          callback({\n            error: H5PEditor.t('H5PEditor.ThreeDModelLoader', 'notAFolder')\n          });\n          return;\n        }\n\n        this.traverseFileTree(entry);\n      }\n    }\n  }\n  /**\n   * Traverse all files in folder.\n   * @param {object} item File or folder.\n   * @param {string} path Current path.\n   */\n  ;\n\n  _proto.traverseFileTree = function traverseFileTree(item) {\n    var _this = this;\n\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        _this.files.push(file);\n\n        var extension = file.name.split('.').pop();\n\n        if (extension === 'gltf') {\n          _this.glbfilename = file.name.substr(file.name.lastIndexOf('/') + 1, file.name.lastIndexOf('.'));\n          var reader = new FileReader();\n          reader.readAsText(file);\n\n          reader.onload = function (event) {\n            _this.gltf = JSON.parse(event.target.result);\n\n            _this.checkForDone();\n          };\n        } else {\n          var _reader = new FileReader();\n\n          _reader.onload = function (theFile) {\n            return function (event) {\n              _this.fileblobs[theFile.name.toLowerCase()] = event.target.result;\n\n              _this.checkForDone();\n            };\n          }(file);\n\n          _reader.readAsArrayBuffer(file);\n        }\n      }, function (error) {\n        _this.callback({\n          error: error\n        });\n      });\n    } else if (item.isDirectory) {\n      var dirReader = item.createReader();\n      dirReader.readEntries(function (entries) {\n        _this.remainingFilesToProcess += entries.length;\n\n        _this.checkForDone();\n\n        for (var i = 0; i < entries.length; i++) {\n          _this.traverseFileTree(entries[i], path + item.name + '/');\n        }\n      });\n    }\n  }\n  /**\n   * Check for being done.\n   */\n  ;\n\n  _proto.checkForDone = function checkForDone() {\n    var _this2 = this;\n\n    this.remainingFilesToProcess--;\n\n    if (this.remainingFilesToProcess === 0) {\n      this.outputBuffers = [];\n      this.bufferMap = new Map();\n      this.bufferOffset = 0;\n      this.processBuffers().then(function () {\n        _this2.callback({\n          file: _this2.buildOutputFile()\n        });\n      })[\"catch\"](function (error) {\n        _this2.callback({\n          error: error\n        });\n      });\n    }\n  }\n  /**\n   * Process all buffers.\n   * @return {Promise} Result.\n   */\n  ;\n\n  _proto.processBuffers = function processBuffers() {\n    var _this3 = this;\n\n    if (!this.gltf) {\n      return Promise.reject(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'noGLTFFound'));\n    }\n\n    var pendingBuffers = this.gltf.buffers.map(function (buffer, bufferIndex) {\n      return _this3.getDataFromUri(buffer).then(function (data) {\n        if (data !== undefined) {\n          _this3.outputBuffers.push(data);\n        }\n\n        delete buffer.uri;\n        buffer.byteLength = data.byteLength;\n\n        _this3.bufferMap.set(bufferIndex, _this3.bufferOffset);\n\n        _this3.bufferOffset += _this3.getAlignedLength(data.byteLength);\n      });\n    });\n    return Promise.all(pendingBuffers).then(function () {\n      var bufferIndex = _this3.gltf.buffers.length;\n      var images = _this3.gltf.images || [];\n      var pendingImages = images.map(function (image) {\n        return _this3.getDataFromUri(image).then(function (data) {\n          if (data === undefined) {\n            delete image['uri'];\n            return;\n          }\n\n          var bufferView = {\n            buffer: 0,\n            byteOffset: _this3.bufferOffset,\n            byteLength: data.byteLength\n          };\n\n          _this3.bufferMap.set(bufferIndex, _this3.bufferOffset);\n\n          bufferIndex++;\n          _this3.bufferOffset += _this3.getAlignedLength(data.byteLength);\n          var bufferViewIndex = _this3.gltf.bufferViews.length;\n\n          _this3.gltf.bufferViews.push(bufferView);\n\n          _this3.outputBuffers.push(data);\n\n          image['bufferView'] = bufferViewIndex;\n          image['mimeType'] = _this3.getMimeType(image.uri);\n          delete image['uri'];\n        });\n      });\n      return Promise.all(pendingImages);\n    });\n  }\n  /**\n   * Build output file from buffer.\n   */\n  ;\n\n  _proto.buildOutputFile = function buildOutputFile() {\n    var Binary = {\n      Magic: 0x46546C67\n    };\n\n    for (var i = 0, a = this.gltf.bufferViews; i < a.length; i++) {\n      var bufferView = a[i];\n\n      if (bufferView.byteOffset === undefined) {\n        bufferView.byteOffset = 0;\n      } else {\n        bufferView.byteOffset = bufferView.byteOffset + this.bufferMap.get(bufferView.buffer);\n      }\n\n      bufferView.buffer = 0;\n    }\n\n    var binBufferSize = this.bufferOffset;\n    this.gltf.buffers = [{\n      byteLength: binBufferSize\n    }];\n    var enc = new TextEncoder();\n    var jsonBuffer = enc.encode(JSON.stringify(this.gltf));\n    var jsonAlignedLength = this.getAlignedLength(jsonBuffer.length);\n    var padding;\n\n    if (jsonAlignedLength !== jsonBuffer.length) {\n      padding = jsonAlignedLength - jsonBuffer.length;\n    }\n\n    var totalSize = 12 + // file header: magic + version + length\n    8 + // json chunk header: json length + type\n    jsonAlignedLength + 8 + // bin chunk header: chunk length + type\n    binBufferSize;\n    var finalBuffer = new ArrayBuffer(totalSize);\n    var dataView = new DataView(finalBuffer);\n    var bufIndex = 0;\n    dataView.setUint32(bufIndex, Binary.Magic, true);\n    bufIndex += 4;\n    dataView.setUint32(bufIndex, 2, true);\n    bufIndex += 4;\n    dataView.setUint32(bufIndex, totalSize, true);\n    bufIndex += 4; // JSON\n\n    dataView.setUint32(bufIndex, jsonAlignedLength, true);\n    bufIndex += 4;\n    dataView.setUint32(bufIndex, 0x4E4F534A, true);\n    bufIndex += 4;\n\n    for (var j = 0; j < jsonBuffer.length; j++) {\n      dataView.setUint8(bufIndex, jsonBuffer[j]);\n      bufIndex++;\n    }\n\n    if (padding !== undefined) {\n      for (var _j = 0; _j < padding; _j++) {\n        dataView.setUint8(bufIndex, 0x20);\n        bufIndex++;\n      }\n    } // BIN\n\n\n    dataView.setUint32(bufIndex, binBufferSize, true);\n    bufIndex += 4;\n    dataView.setUint32(bufIndex, 0x004E4942, true);\n    bufIndex += 4;\n\n    for (var _i = 0; _i < this.outputBuffers.length; _i++) {\n      var bufoffset = bufIndex + this.bufferMap.get(_i);\n      var buf = new Uint8Array(this.outputBuffers[_i]);\n      var thisbufindex = bufoffset;\n\n      for (var _j2 = 0; _j2 < buf.byteLength; _j2++) {\n        dataView.setUint8(thisbufindex, buf[_j2]);\n        thisbufindex++;\n      }\n    }\n\n    return new Blob([finalBuffer], {\n      type: 'model/json-binary'\n    });\n  }\n  /**\n   * Check for base64 encoding.\n   * @param {string} uri URI to check for encoding.\n   * @return {boolean} True if URI is base64 encoded.\n   */\n  ;\n\n  _proto.isBase64 = function isBase64(uri) {\n    return uri.length < 5 ? false : uri.substr(0, 5) === 'data:';\n  }\n  /**\n   * Decode URI from base64 encoding.\n   * @param {string} uri URI to decode.\n   * @return {Promise} Response.\n   */\n  ;\n\n  _proto.decodeBase64 = function decodeBase64(uri) {\n    return fetch(uri).then(function (response) {\n      return response.arrayBuffer();\n    });\n  }\n  /**\n   * Get data from buffer URI.\n   * @param {object} buffer Buffer.\n   * @return {Promise} Result.\n   */\n  ;\n\n  _proto.getDataFromUri = function getDataFromUri(buffer) {\n    if (buffer.uri === undefined) {\n      return Promise.resolve();\n    } else if (this.isBase64(buffer.uri)) {\n      return this.decodeBase64(buffer.uri);\n    } else {\n      var filename = buffer.uri.substr(buffer.uri.lastIndexOf('/') + 1);\n      return Promise.resolve(this.fileblobs[filename.toLowerCase()]);\n    }\n  }\n  /**\n   * Get aligned value.\n   * @param {number} Value.\n   * @return {number} Aligned value.\n   */\n  ;\n\n  _proto.getAlignedLength = function getAlignedLength(value) {\n    if (value === 0) {\n      return value;\n    }\n\n    var alignValue = 4;\n    var multiple = value % alignValue;\n    return multiple === 0 ? value : value + (alignValue - multiple);\n  }\n  /**\n   * Get MIME type.\n   * @param {string} filename.\n   * @return {string} MIME type.\n   */\n  ;\n\n  _proto.getMimeType = function getMimeType(filename) {\n    for (var mimeType in this.gltfMimeTypes) {\n      for (var extensionIndex in this.gltfMimeTypes[mimeType]) {\n        var extension = this.gltfMimeTypes[mimeType][extensionIndex];\n\n        if (filename.toLowerCase().split('.').pop() === \"\".concat(extension)) {\n          return mimeType;\n        }\n      }\n    }\n\n    return 'application/octet-stream';\n  };\n\n  return ThreeDModelLoaderGLTF2GLB;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThreeDModelLoaderGLTF2GLB);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLWdsdGYyZ2xiLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWVkaXRvci0zZC1tb2RlbC1sb2FkZXIvLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLWdsdGYyZ2xiLmpzP2Q4ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAY2xhc3MgSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyR0xURjJHTEJcbiAqXG4gKiBCYXNlZCBvbiBtYWtlZ2xiIGJ5IFNhdXJhYmggQmhhdGlhXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc2J0cm9uL21ha2VnbGJcbiAqIFRoZSBNSVQgTGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFNhdXJhYmggQmhhdGlhXG4gKlxuICovXG5jbGFzcyBUaHJlZURNb2RlbExvYWRlckdMVEYyR0xCIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZW1haW5pbmdGaWxlc1RvUHJvY2VzcyA9IDA7XG4gICAgdGhpcy5maWxlcyA9IFtdO1xuICAgIHRoaXMuZmlsZWJsb2JzPVtdO1xuICAgIHRoaXMuZ2xiZmlsZW5hbWU7XG4gICAgdGhpcy5nbHRmO1xuICAgIHRoaXMub3V0cHV0QnVmZmVycztcbiAgICB0aGlzLmJ1ZmZlck1hcDtcbiAgICB0aGlzLmJ1ZmZlck9mZnNldDtcbiAgICB0aGlzLmdsdGZNaW1lVHlwZXMgPSB7XG4gICAgICAnaW1hZ2UvcG5nJzogWydwbmcnXSxcbiAgICAgICdpbWFnZS9qcGVnJzogWydqcGcnLCAnanBlZyddLFxuICAgICAgJ3RleHQvcGxhaW4nOiBbJ2dsc2wnLCAndmVydCcsICd2cycsICdmcmFnJywgJ2ZzJywgJ3R4dCddLFxuICAgICAgJ2ltYWdlL3ZuZC1tcy5kZHMnOiBbJ2RkcyddXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGl0ZW1zIHRvIHNpbmdsZSBnbGIgZmlsZS5cbiAgICogQHBhcmFtIHtvYmplY3RbXX0gaXRlbXMgSXRlbXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrIHdoZW4gZG9uZSwgd2lsbCByZXR1cm4gZmlsZSBvciBlcnJvci5cbiAgICovXG4gIGNvbnZlcnQoaXRlbXMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFpdGVtcyB8fCB0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cbiAgICB0aGlzLnJlbWFpbmluZ0ZpbGVzVG9Qcm9jZXNzID0gaXRlbXMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVudHJ5O1xuICAgICAgaWYgKGl0ZW1zW2ldLmdldEFzRW50cnkpIHtcbiAgICAgICAgZW50cnkgPSBpdGVtc1tpXS5nZXRBc0VudHJ5KCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpdGVtc1tpXS53ZWJraXRHZXRBc0VudHJ5KSB7XG4gICAgICAgIGVudHJ5ID0gaXRlbXNbaV0ud2Via2l0R2V0QXNFbnRyeSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgaWYgKGVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICAgIGVycm9yOiBINVBFZGl0b3IudCgnSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyJywgJ25vdEFGb2xkZXInKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJhdmVyc2VGaWxlVHJlZShlbnRyeSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYXZlcnNlIGFsbCBmaWxlcyBpbiBmb2xkZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIEZpbGUgb3IgZm9sZGVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBDdXJyZW50IHBhdGguXG4gICAqL1xuICB0cmF2ZXJzZUZpbGVUcmVlKGl0ZW0sIHBhdGggPSAnJykge1xuICAgIGlmIChpdGVtLmlzRmlsZSkge1xuICAgICAgaXRlbS5maWxlKChmaWxlKSA9PiB7XG4gICAgICAgIHRoaXMuZmlsZXMucHVzaChmaWxlKTtcblxuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcbiAgICAgICAgaWYgKGV4dGVuc2lvbiA9PT0gJ2dsdGYnKSB7XG4gICAgICAgICAgdGhpcy5nbGJmaWxlbmFtZSA9IGZpbGUubmFtZS5zdWJzdHIoZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcvJykgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSk7XG5cbiAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2x0ZiA9IEpTT04ucGFyc2UoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9yRG9uZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIub25sb2FkID0gKCh0aGVGaWxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZmlsZWJsb2JzW3RoZUZpbGUubmFtZS50b0xvd2VyQ2FzZSgpXSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JEb25lKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKGZpbGUpO1xuICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgfVxuICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soe2Vycm9yOiBlcnJvcn0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGl0ZW0uaXNEaXJlY3RvcnkpIHtcbiAgICAgIGNvbnN0IGRpclJlYWRlciA9IGl0ZW0uY3JlYXRlUmVhZGVyKCk7XG4gICAgICBkaXJSZWFkZXIucmVhZEVudHJpZXMoKGVudHJpZXMpID0+IHtcbiAgICAgICAgdGhpcy5yZW1haW5pbmdGaWxlc1RvUHJvY2VzcyArPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5jaGVja0ZvckRvbmUoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy50cmF2ZXJzZUZpbGVUcmVlKGVudHJpZXNbaV0sIHBhdGggKyBpdGVtLm5hbWUgKyAnLycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIGJlaW5nIGRvbmUuXG4gICAqL1xuICBjaGVja0ZvckRvbmUoKSB7XG4gICAgdGhpcy5yZW1haW5pbmdGaWxlc1RvUHJvY2Vzcy0tO1xuXG4gICAgaWYgKHRoaXMucmVtYWluaW5nRmlsZXNUb1Byb2Nlc3MgPT09IDApIHtcbiAgICAgIHRoaXMub3V0cHV0QnVmZmVycyA9IFtdO1xuICAgICAgdGhpcy5idWZmZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLmJ1ZmZlck9mZnNldCA9IDA7XG5cbiAgICAgIHRoaXMucHJvY2Vzc0J1ZmZlcnMoKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jYWxsYmFjayh7XG4gICAgICAgICAgICBmaWxlOiB0aGlzLmJ1aWxkT3V0cHV0RmlsZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyBhbGwgYnVmZmVycy5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gUmVzdWx0LlxuICAgKi9cbiAgcHJvY2Vzc0J1ZmZlcnMoKSB7XG4gICAgaWYgKCF0aGlzLmdsdGYpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChINVBFZGl0b3IudCgnSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyJywgJ25vR0xURkZvdW5kJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHBlbmRpbmdCdWZmZXJzID0gdGhpcy5nbHRmLmJ1ZmZlcnMubWFwKChidWZmZXIsIGJ1ZmZlckluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREYXRhRnJvbVVyaShidWZmZXIpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzLnB1c2goZGF0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGVsZXRlIGJ1ZmZlci51cmk7XG4gICAgICAgICAgYnVmZmVyLmJ5dGVMZW5ndGggPSBkYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgdGhpcy5idWZmZXJNYXAuc2V0KGJ1ZmZlckluZGV4LCB0aGlzLmJ1ZmZlck9mZnNldCk7XG4gICAgICAgICAgdGhpcy5idWZmZXJPZmZzZXQgKz0gdGhpcy5nZXRBbGlnbmVkTGVuZ3RoKGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBlbmRpbmdCdWZmZXJzKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBsZXQgYnVmZmVySW5kZXggPSB0aGlzLmdsdGYuYnVmZmVycy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHRoaXMuZ2x0Zi5pbWFnZXMgfHwgW107XG4gICAgICAgIGNvbnN0IHBlbmRpbmdJbWFnZXMgPSBpbWFnZXMubWFwKChpbWFnZSkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmdldERhdGFGcm9tVXJpKGltYWdlKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZSBpbWFnZVsndXJpJ107XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGJ1ZmZlclZpZXcgPSB7XG4gICAgICAgICAgICAgIGJ1ZmZlcjogMCxcbiAgICAgICAgICAgICAgYnl0ZU9mZnNldDogdGhpcy5idWZmZXJPZmZzZXQsXG4gICAgICAgICAgICAgIGJ5dGVMZW5ndGg6IGRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuYnVmZmVyTWFwLnNldChidWZmZXJJbmRleCwgdGhpcy5idWZmZXJPZmZzZXQpO1xuICAgICAgICAgICAgYnVmZmVySW5kZXgrKztcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyT2Zmc2V0ICs9IHRoaXMuZ2V0QWxpZ25lZExlbmd0aChkYXRhLmJ5dGVMZW5ndGgpO1xuXG4gICAgICAgICAgICBjb25zdCBidWZmZXJWaWV3SW5kZXggPSB0aGlzLmdsdGYuYnVmZmVyVmlld3MubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5nbHRmLmJ1ZmZlclZpZXdzLnB1c2goYnVmZmVyVmlldyk7XG4gICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMucHVzaChkYXRhKTtcbiAgICAgICAgICAgIGltYWdlWydidWZmZXJWaWV3J10gPSBidWZmZXJWaWV3SW5kZXg7XG4gICAgICAgICAgICBpbWFnZVsnbWltZVR5cGUnXSA9IHRoaXMuZ2V0TWltZVR5cGUoaW1hZ2UudXJpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBpbWFnZVsndXJpJ107XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwZW5kaW5nSW1hZ2VzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIG91dHB1dCBmaWxlIGZyb20gYnVmZmVyLlxuICAgKi9cbiAgYnVpbGRPdXRwdXRGaWxlKCkge1xuICAgIGNvbnN0IEJpbmFyeSA9IHtcbiAgICAgIE1hZ2ljOiAweDQ2NTQ2QzY3XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBhID0gdGhpcy5nbHRmLmJ1ZmZlclZpZXdzOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYnVmZmVyVmlldyA9IGFbaV07XG4gICAgICBpZiAoYnVmZmVyVmlldy5ieXRlT2Zmc2V0PT09IHVuZGVmaW5lZCkge1xuICAgICAgICBidWZmZXJWaWV3LmJ5dGVPZmZzZXQgPSAwO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGJ1ZmZlclZpZXcuYnl0ZU9mZnNldCA9IGJ1ZmZlclZpZXcuYnl0ZU9mZnNldCArIHRoaXMuYnVmZmVyTWFwLmdldChidWZmZXJWaWV3LmJ1ZmZlcik7XG4gICAgICB9XG4gICAgICBidWZmZXJWaWV3LmJ1ZmZlciA9IDA7XG4gICAgfVxuXG4gICAgY29uc3QgYmluQnVmZmVyU2l6ZSA9IHRoaXMuYnVmZmVyT2Zmc2V0O1xuICAgIHRoaXMuZ2x0Zi5idWZmZXJzID0gW3tcbiAgICAgIGJ5dGVMZW5ndGg6IGJpbkJ1ZmZlclNpemVcbiAgICB9XTtcblxuICAgIGNvbnN0IGVuYyA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IGpzb25CdWZmZXIgPSBlbmMuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMuZ2x0ZikpO1xuICAgIGNvbnN0IGpzb25BbGlnbmVkTGVuZ3RoID0gdGhpcy5nZXRBbGlnbmVkTGVuZ3RoKGpzb25CdWZmZXIubGVuZ3RoKTtcbiAgICBsZXQgcGFkZGluZztcblxuICAgIGlmIChqc29uQWxpZ25lZExlbmd0aCAhPT0ganNvbkJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHBhZGRpbmcgPSBqc29uQWxpZ25lZExlbmd0aCAtIGpzb25CdWZmZXIubGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsU2l6ZSA9XG4gICAgICAxMiArIC8vIGZpbGUgaGVhZGVyOiBtYWdpYyArIHZlcnNpb24gKyBsZW5ndGhcbiAgICAgIDggKyAvLyBqc29uIGNodW5rIGhlYWRlcjoganNvbiBsZW5ndGggKyB0eXBlXG4gICAgICBqc29uQWxpZ25lZExlbmd0aCArXG4gICAgICA4ICsgLy8gYmluIGNodW5rIGhlYWRlcjogY2h1bmsgbGVuZ3RoICsgdHlwZVxuICAgICAgYmluQnVmZmVyU2l6ZTtcblxuICAgIGNvbnN0IGZpbmFsQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsU2l6ZSk7XG4gICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoZmluYWxCdWZmZXIpO1xuXG4gICAgbGV0IGJ1ZkluZGV4ID0gMDtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoYnVmSW5kZXgsIEJpbmFyeS5NYWdpYywgdHJ1ZSk7XG4gICAgYnVmSW5kZXggKz0gNDtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoYnVmSW5kZXgsIDIsIHRydWUpO1xuICAgIGJ1ZkluZGV4ICs9IDQ7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKGJ1ZkluZGV4LCB0b3RhbFNpemUsIHRydWUpO1xuICAgIGJ1ZkluZGV4ICs9IDQ7XG5cbiAgICAvLyBKU09OXG4gICAgZGF0YVZpZXcuc2V0VWludDMyKGJ1ZkluZGV4LCBqc29uQWxpZ25lZExlbmd0aCwgdHJ1ZSk7XG4gICAgYnVmSW5kZXggKz0gNDtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoYnVmSW5kZXgsIDB4NEU0RjUzNEEsIHRydWUpO1xuICAgIGJ1ZkluZGV4ICs9IDQ7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGpzb25CdWZmZXIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGRhdGFWaWV3LnNldFVpbnQ4KGJ1ZkluZGV4LCBqc29uQnVmZmVyW2pdKTtcbiAgICAgIGJ1ZkluZGV4Kys7XG4gICAgfVxuXG4gICAgaWYgKHBhZGRpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYWRkaW5nOyBqKyspIHtcbiAgICAgICAgZGF0YVZpZXcuc2V0VWludDgoYnVmSW5kZXgsIDB4MjApO1xuICAgICAgICBidWZJbmRleCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJJTlxuICAgIGRhdGFWaWV3LnNldFVpbnQzMihidWZJbmRleCwgYmluQnVmZmVyU2l6ZSwgdHJ1ZSk7XG4gICAgYnVmSW5kZXggKz0gNDtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoYnVmSW5kZXgsIDB4MDA0RTQ5NDIsIHRydWUpO1xuICAgIGJ1ZkluZGV4ICs9IDQ7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3V0cHV0QnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYnVmb2Zmc2V0ID0gYnVmSW5kZXggKyB0aGlzLmJ1ZmZlck1hcC5nZXQoaSk7XG4gICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSh0aGlzLm91dHB1dEJ1ZmZlcnNbaV0pO1xuICAgICAgbGV0IHRoaXNidWZpbmRleCA9IGJ1Zm9mZnNldDtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYnVmLmJ5dGVMZW5ndGg7IGorKykge1xuICAgICAgICBkYXRhVmlldy5zZXRVaW50OCh0aGlzYnVmaW5kZXgsIGJ1ZltqXSk7XG4gICAgICAgIHRoaXNidWZpbmRleCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgQmxvYihbZmluYWxCdWZmZXJdLCB7dHlwZTogJ21vZGVsL2pzb24tYmluYXJ5J30pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciBiYXNlNjQgZW5jb2RpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmkgVVJJIHRvIGNoZWNrIGZvciBlbmNvZGluZy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkkgaXMgYmFzZTY0IGVuY29kZWQuXG4gICAqL1xuICBpc0Jhc2U2NCh1cmkpIHtcbiAgICByZXR1cm4gKHVyaS5sZW5ndGggPCA1KSA/IGZhbHNlIDogdXJpLnN1YnN0cigwLCA1KSA9PT0gJ2RhdGE6JztcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGUgVVJJIGZyb20gYmFzZTY0IGVuY29kaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJpIFVSSSB0byBkZWNvZGUuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IFJlc3BvbnNlLlxuICAgKi9cbiAgZGVjb2RlQmFzZTY0KHVyaSkge1xuICAgIHJldHVybiBmZXRjaCh1cmkpLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5hcnJheUJ1ZmZlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZGF0YSBmcm9tIGJ1ZmZlciBVUkkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBidWZmZXIgQnVmZmVyLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBSZXN1bHQuXG4gICAqL1xuICBnZXREYXRhRnJvbVVyaShidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyLnVyaSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuaXNCYXNlNjQoYnVmZmVyLnVyaSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlY29kZUJhc2U2NChidWZmZXIudXJpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGJ1ZmZlci51cmkuc3Vic3RyKGJ1ZmZlci51cmkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmZpbGVibG9ic1tmaWxlbmFtZS50b0xvd2VyQ2FzZSgpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGlnbmVkIHZhbHVlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gVmFsdWUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQWxpZ25lZCB2YWx1ZS5cbiAgICovXG4gIGdldEFsaWduZWRMZW5ndGgodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBhbGlnblZhbHVlID0gNDtcbiAgICBjb25zdCBtdWx0aXBsZSA9IHZhbHVlICUgYWxpZ25WYWx1ZTtcbiAgICByZXR1cm4gKG11bHRpcGxlID09PSAwKSA/IHZhbHVlIDogdmFsdWUgKyAoYWxpZ25WYWx1ZSAtIG11bHRpcGxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgTUlNRSB0eXBlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWUuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTUlNRSB0eXBlLlxuICAgKi9cbiAgZ2V0TWltZVR5cGUoZmlsZW5hbWUpIHtcbiAgICBmb3IgKGxldCBtaW1lVHlwZSBpbiB0aGlzLmdsdGZNaW1lVHlwZXMpIHtcbiAgICAgIGZvciAobGV0IGV4dGVuc2lvbkluZGV4IGluIHRoaXMuZ2x0Zk1pbWVUeXBlc1ttaW1lVHlwZV0pIHtcbiAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHRoaXMuZ2x0Zk1pbWVUeXBlc1ttaW1lVHlwZV1bZXh0ZW5zaW9uSW5kZXhdO1xuXG4gICAgICAgIGlmIChmaWxlbmFtZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcuJykucG9wKCkgPT09IChgJHtleHRlbnNpb259YCkpIHtcbiAgICAgICAgICByZXR1cm4gbWltZVR5cGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFRocmVlRE1vZGVsTG9hZGVyR0xURjJHTEI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scripts/h5peditor-3d-model-loader-gltf2glb.js\n");

/***/ }),

/***/ "./src/scripts/h5peditor-3d-model-loader-preview.js":
/*!**********************************************************!*\
  !*** ./src/scripts/h5peditor-3d-model-loader-preview.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar ThreeDModelLoaderPreview = /*#__PURE__*/function () {\n  /**\n   * 3D Preview of model\n   * @class H5PEditor.ThreeDModelLoaderPreview\n   */\n  function ThreeDModelLoaderPreview() {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.params = params || {};\n    this.params.plane = this.params.plane || false;\n    this.callbacks = callbacks || {};\n\n    this.callbacks.onIframeComplete = callbacks.onIframeComplete || function () {};\n\n    this.iframe = this.buildIframe();\n  }\n  /**\n   * Get scene DOM.\n   * @return {HTMLElement} Scene DOM.\n   */\n\n\n  var _proto = ThreeDModelLoaderPreview.prototype;\n\n  _proto.getDOM = function getDOM() {\n    return this.iframe;\n  }\n  /**\n   * Build iframe.\n   * @param {HTMLElement} iframe.\n   */\n  ;\n\n  _proto.buildIframe = function buildIframe() {\n    var _this = this;\n\n    var iframe = document.createElement('iframe');\n    iframe.classList.add('h5p-editor-3d-model-loader-preview-iframe');\n    iframe.addEventListener('load', function () {\n      if (_this.iframeLoaded) {\n        return;\n      } // Will write the iframe contents\n\n\n      _this.handleIframeLoaded(_this.iframe);\n\n      _this.iframeLoaded = true;\n    });\n    return iframe;\n  }\n  /**\n   * Handle iframe loaded.\n   * @param {HTMLElement} iframe Iframe.\n   */\n  ;\n\n  _proto.handleIframeLoaded = function handleIframeLoaded(iframe) {\n    try {\n      var iframeWindow = iframe.contentWindow; // Write iframe contents\n\n      iframe.contentWindow.document.open();\n      iframe.contentWindow.document.write(this.buildHTML().outerHTML);\n      iframe.contentWindow.document.close();\n      this.iframeDocument = iframe.contentDocument ? iframe.contentDocument : iframeWindow;\n      this.handleIframeComplete();\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n  /**\n   * Build HTML for iframe.\n   * @return {HTMLElement}\n   */\n  ;\n\n  _proto.buildHTML = function buildHTML() {\n    var html = document.createElement('html');\n    html.appendChild(this.buildHeader());\n    html.appendChild(this.buildBody());\n    return html;\n  }\n  /**\n   * Build Header.\n   * @return {HTMLElement} Header.\n   */\n  ;\n\n  _proto.buildHeader = function buildHeader() {\n    var head = document.createElement('head'); // There must be a way to build the style dynamically from H5P libraries\n    // Load AFrame script\n\n    var scriptAFrame = document.createElement('script');\n    scriptAFrame.text = H5P.AFrame.toString();\n    head.appendChild(scriptAFrame);\n    var scriptAFrameOrbitControls = document.createElement('script');\n    scriptAFrameOrbitControls.text = H5P.AFrameOrbitControls.toString();\n    head.appendChild(scriptAFrameOrbitControls); // Start scripts\n\n    var scriptStarter = document.createElement('script');\n    scriptStarter.text = 'H5PAFrame();';\n    scriptStarter.text += 'H5PAFrameOrbitControls();';\n    head.appendChild(scriptStarter);\n    return head;\n  }\n  /**\n   * Build body.\n   * @return {HTMLElement} Body.\n   */\n  ;\n\n  _proto.buildBody = function buildBody() {\n    var body = document.createElement('body');\n    body.style.background = 'url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TtVIqDnYQcQhSnSxIFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi5Oik6CIl/i8ptIj14Lgf7+497t4BQr3MNKtrAtB020wl4mImuyoGXtGDEIKIYURmljEnSUl0HF/38PH1LsqzOp/7c/SpOYsBPpF4lhmmTbxBPL1pG5z3icOsKKvE58TjJl2Q+JHrisdvnAsuCzwzbKZT88RhYrHQxkobs6KpEU8RR1RNp3wh47HKeYuzVq6y5j35C0M5fWWZ6zSHkcAiliBBhIIqSijDRpRWnRQLKdqPd/APuX6JXAq5SmDkWEAFGmTXD/4Hv7u18pMxLykUB7pfHOdjFAjsAo2a43wfO07jBPA/A1d6y1+pAzOfpNdaWuQI6N8GLq5bmrIHXO4Ag0+GbMqu5Kcp5PPA+xl9UxYYuAWCa15vzX2cPgBp6ip5AxwcAmMFyl7v8O7e9t7+PdPs7weB03KtCTN/SAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QGDAsAMkAVB00AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAPklEQVRIx2M8ceIEAynA1NSUJPVMDDQGoxaMWjBqwagFoxZQAzD+/fuXJA2k1h+jcTBqwagFoxaMWjAkLAAAEQ8IhUX6aEEAAAAASUVORK5CYII=\")';\n    body.style.margin = '0';\n    body.style.overflow = 'hidden';\n    body.style.padding = '0';\n    body.style.height = '144px';\n    body.style.width = '256px';\n    body.appendChild(this.buildScene());\n    return body;\n  }\n  /**\n   * Build Scene.\n   * @return {HTMLElement} Scene.\n   */\n  ;\n\n  _proto.buildScene = function buildScene() {\n    // Scene\n    var scene = document.createElement('a-scene');\n    scene.setAttribute('embedded', '');\n    scene.setAttribute('vr-mode-ui', 'false'); // Model\n\n    var entityModel = document.createElement('a-entity');\n    var model = document.createElement('a-gltf-model');\n    model.setAttribute('id', 'model');\n    entityModel.appendChild(model);\n    scene.appendChild(entityModel);\n\n    if (this.params.plane) {\n      // Plane\n      var markerPlane = document.createElement('a-plane');\n      markerPlane.setAttribute('id', 'markerPlane');\n      markerPlane.setAttribute('position', \"\".concat(ThreeDModelLoaderPreview.DEFAULT_OFFSET.x, \" \").concat(ThreeDModelLoaderPreview.DEFAULT_OFFSET.y, \" \").concat(ThreeDModelLoaderPreview.DEFAULT_OFFSET.z));\n      markerPlane.setAttribute('rotation', '-90 0 0');\n      markerPlane.setAttribute('width', '1');\n      markerPlane.setAttribute('height', '1');\n      markerPlane.setAttribute('src', ThreeDModelLoaderPreview.DEFAULT_TEXTURE);\n      markerPlane.setAttribute('shadow', '');\n      scene.appendChild(markerPlane);\n    } // Camera\n\n\n    var entityCamera = document.createElement('a-entity');\n    entityCamera.setAttribute('camera', '');\n    entityCamera.setAttribute('look-controls', '');\n    entityCamera.setAttribute('orbit-controls', 'initialPosition: 0 0 2; enableKeys: false;');\n    scene.appendChild(entityCamera);\n    return scene;\n  }\n  /**\n   * Handle iframe complete. Depends on load timing.\n   */\n  ;\n\n  _proto.handleIframeComplete = function handleIframeComplete() {\n    var _this2 = this;\n\n    if (this.iframeDocument.readyState !== 'complete') {\n      this.iframeDocument.addEventListener('readystatechange', function () {\n        if (_this2.iframeDocument.readyState === 'complete') {\n          _this2.model = _this2.iframeDocument.querySelector('#model');\n          _this2.markerPlane = _this2.iframeDocument.querySelector('#markerPlane');\n          _this2.isInitialized = true;\n\n          _this2.callbacks.iframeComplete();\n        }\n      });\n    } else {\n      this.model = this.iframeDocument.querySelector('#model');\n      this.markerPlane = this.iframeDocument.querySelector('#markerPlane');\n      this.isInitialized = true;\n      this.callbacks.onIframeComplete();\n    }\n  }\n  /**\n   * Show preview.\n   */\n  ;\n\n  _proto.show = function show() {\n    this.iframe.classList.remove('h5peditor-3d-model-loader-display-none');\n  }\n  /**\n   * Hide preview.\n   */\n  ;\n\n  _proto.hide = function hide() {\n    this.iframe.classList.add('h5peditor-3d-model-loader-display-none');\n  }\n  /**\n   * Set marker texture. If no src parameter, remove texure.\n   * @param {string} [src] Base64 encoded image source path.\n   */\n  ;\n\n  _proto.setMarkerTexture = function setMarkerTexture() {\n    var src = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ThreeDModelLoaderPreview.DEFAULT_TEXTURE;\n\n    if (!this.isInitialized) {\n      return; // Not ready\n    }\n\n    if (!this.markerPlane) {\n      return; // No marker plane\n    }\n\n    this.markerPlane.setAttribute('src', src);\n  }\n  /**\n   * Set model.\n   * @param {string} path Object file path.\n   * @param {object} params Parameters.\n   */\n  ;\n\n  _proto.setModel = function setModel(path, params) {\n    if (!this.isInitialized) {\n      return;\n    }\n\n    if (!path) {\n      this.model.setAttribute('visible', false);\n      return;\n    } // Get potential cross-origin source\n\n\n    var element = document.createElement('div');\n    H5P.setSource(element, {\n      path: path\n    }, H5PEditor.contentId);\n    var src = element.src;\n\n    if (!src) {\n      return;\n    } // Set model\n\n\n    this.model.setAttribute('gltf-model', src); // Set geometry\n\n    if (params && params.scale) {\n      this.setModelScale(params.scale);\n    }\n\n    if (params && params.position) {\n      this.setModelPosition(params.position);\n    }\n\n    if (params && params.rotation) {\n      this.setModelRotation(params.rotation);\n    }\n\n    this.model.setAttribute('visible', true);\n  }\n  /**\n   * Set model scale.\n   * @param {number} scale Scale relative to original model scale.\n   */\n  ;\n\n  _proto.setModelScale = function setModelScale(scale) {\n    if (!this.isInitialized || !scale) {\n      return;\n    }\n\n    scale = Math.max(0.01, scale);\n    this.model.setAttribute('scale', \"\".concat(scale, \" \").concat(scale, \" \").concat(scale));\n  }\n  /**\n   * Set model position.\n   * @param {object} coordinates Coordinates relative to marker.\n   * @param {number} coordinates.x X coordinate.\n   * @param {number} coordinates.y Y coordinate.\n   * @param {number} coordinates.z Z coordinate.\n   */\n  ;\n\n  _proto.setModelPosition = function setModelPosition(coordinates) {\n    if (!this.isInitialized || !coordinates) {\n      return;\n    }\n\n    var x = coordinates.x + ThreeDModelLoaderPreview.DEFAULT_OFFSET.x;\n    var y = coordinates.y + ThreeDModelLoaderPreview.DEFAULT_OFFSET.y;\n    var z = coordinates.z + ThreeDModelLoaderPreview.DEFAULT_OFFSET.z;\n    this.model.setAttribute('position', \"\".concat(x, \" \").concat(y, \" \").concat(z));\n  }\n  /**\n   * Set model rotation.\n   * @param {object} angles Angles relative to marker.\n   * @param {number} angles.x X angle.\n   * @param {number} angles.y Y angle.\n   * @param {number} angles.z Z angle.\n   */\n  ;\n\n  _proto.setModelRotation = function setModelRotation(angles) {\n    if (!this.isInitialized || !angles) {\n      return;\n    }\n\n    this.model.setAttribute('rotation', \"\".concat(angles.x, \" \").concat(angles.y, \" \").concat(angles.z));\n  };\n\n  return ThreeDModelLoaderPreview;\n}(); // Default offset\n\n\nThreeDModelLoaderPreview.DEFAULT_OFFSET = {\n  x: 0,\n  y: -1,\n  z: 0\n}; // White texture\n\nThreeDModelLoaderPreview.DEFAULT_TEXTURE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9btSoVBzOIOGSogmBBVMRRq1CECqFWaNXB5NIPoUlDkuLiKLgWHPxYrDq4OOvq4CoIgh8gTo5Oii5S4v+SQosYD4778e7e4+4dEKyVmGa1jQGabpupRFzMZFfE8Cs6EIGAEXTJzDJmJSkJ3/F1jwBf72I8y//cn6NHzVkMCIjEM8wwbeJ14qlN2+C8TyywoqwSnxOPmnRB4keuKx6/cS64HOSZgplOzRELxGKhhZUWZkVTI54kjqqaTvnBjMcq5y3OWqnCGvfkL4zk9OUlrtMcRAILWIQEEQoq2EAJNmK06qRYSNF+3Mc/4Polcink2gAjxzzK0CC7fvA/+N2tlZ8Y95IicaD9xXE+hoDwLlCvOs73sePUT4DQM3ClN/3lGjD9SXq1qUWPgN5t4OK6qSl7wOUO0P9kyKbsSiGawXweeD+jb8oCfbdA96rXW2Mfpw9AmrpK3gAHh8BwgbLXfN7d2drbv2ca/f0ARjFylR0Z2fIAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfkBgwUKTdjQ4hkAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAAxJREFUCNdj+P//PwAF/gL+3MxZ5wAAAABJRU5ErkJggg==';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThreeDModelLoaderPreview);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLXByZXZpZXcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oNXAtZWRpdG9yLTNkLW1vZGVsLWxvYWRlci8uL3NyYy9zY3JpcHRzL2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXItcHJldmlldy5qcz85Y2FkIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRocmVlRE1vZGVsTG9hZGVyUHJldmlldyB7XG4gIC8qKlxuICAgKiAzRCBQcmV2aWV3IG9mIG1vZGVsXG4gICAqIEBjbGFzcyBINVBFZGl0b3IuVGhyZWVETW9kZWxMb2FkZXJQcmV2aWV3XG4gICAqL1xuICBjb25zdHJ1Y3RvcihwYXJhbXMgPSB7fSwgY2FsbGJhY2tzID0ge30pIHtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcbiAgICB0aGlzLnBhcmFtcy5wbGFuZSA9IHRoaXMucGFyYW1zLnBsYW5lIHx8IGZhbHNlO1xuXG4gICAgdGhpcy5jYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG4gICAgdGhpcy5jYWxsYmFja3Mub25JZnJhbWVDb21wbGV0ZSA9IGNhbGxiYWNrcy5vbklmcmFtZUNvbXBsZXRlIHx8ICgoKSA9PiB7fSk7XG5cbiAgICB0aGlzLmlmcmFtZSA9IHRoaXMuYnVpbGRJZnJhbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2NlbmUgRE9NLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gU2NlbmUgRE9NLlxuICAgKi9cbiAgZ2V0RE9NKCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBpZnJhbWUuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGlmcmFtZS5cbiAgICovXG4gIGJ1aWxkSWZyYW1lKCkge1xuICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5jbGFzc0xpc3QuYWRkKCdoNXAtZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1wcmV2aWV3LWlmcmFtZScpO1xuXG4gICAgaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pZnJhbWVMb2FkZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBXaWxsIHdyaXRlIHRoZSBpZnJhbWUgY29udGVudHNcbiAgICAgIHRoaXMuaGFuZGxlSWZyYW1lTG9hZGVkKHRoaXMuaWZyYW1lKTtcbiAgICAgIHRoaXMuaWZyYW1lTG9hZGVkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBpZnJhbWU7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGlmcmFtZSBsb2FkZWQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGlmcmFtZSBJZnJhbWUuXG4gICAqL1xuICBoYW5kbGVJZnJhbWVMb2FkZWQoaWZyYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlmcmFtZVdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93O1xuXG4gICAgICAvLyBXcml0ZSBpZnJhbWUgY29udGVudHNcbiAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Lm9wZW4oKTtcbiAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LndyaXRlKHRoaXMuYnVpbGRIVE1MKCkub3V0ZXJIVE1MKTtcbiAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmNsb3NlKCk7XG5cbiAgICAgIHRoaXMuaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudERvY3VtZW50ID8gaWZyYW1lLmNvbnRlbnREb2N1bWVudDogaWZyYW1lV2luZG93O1xuXG4gICAgICB0aGlzLmhhbmRsZUlmcmFtZUNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgSFRNTCBmb3IgaWZyYW1lLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkSFRNTCgpIHtcbiAgICBjb25zdCBodG1sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHRtbCcpO1xuICAgIGh0bWwuYXBwZW5kQ2hpbGQodGhpcy5idWlsZEhlYWRlcigpKTtcbiAgICBodG1sLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRCb2R5KCkpO1xuXG4gICAgcmV0dXJuIGh0bWw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgSGVhZGVyLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gSGVhZGVyLlxuICAgKi9cbiAgYnVpbGRIZWFkZXIoKSB7XG4gICAgY29uc3QgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWQnKTtcblxuICAgIC8vIFRoZXJlIG11c3QgYmUgYSB3YXkgdG8gYnVpbGQgdGhlIHN0eWxlIGR5bmFtaWNhbGx5IGZyb20gSDVQIGxpYnJhcmllc1xuXG4gICAgLy8gTG9hZCBBRnJhbWUgc2NyaXB0XG4gICAgY29uc3Qgc2NyaXB0QUZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0QUZyYW1lLnRleHQgPSBINVAuQUZyYW1lLnRvU3RyaW5nKCk7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRBRnJhbWUpO1xuXG4gICAgY29uc3Qgc2NyaXB0QUZyYW1lT3JiaXRDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdEFGcmFtZU9yYml0Q29udHJvbHMudGV4dCA9IEg1UC5BRnJhbWVPcmJpdENvbnRyb2xzLnRvU3RyaW5nKCk7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRBRnJhbWVPcmJpdENvbnRyb2xzKTtcblxuICAgIC8vIFN0YXJ0IHNjcmlwdHNcbiAgICBjb25zdCBzY3JpcHRTdGFydGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0U3RhcnRlci50ZXh0ICA9ICdINVBBRnJhbWUoKTsnO1xuICAgIHNjcmlwdFN0YXJ0ZXIudGV4dCArPSAnSDVQQUZyYW1lT3JiaXRDb250cm9scygpOyc7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRTdGFydGVyKTtcblxuICAgIHJldHVybiBoZWFkO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGJvZHkuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBCb2R5LlxuICAgKi9cbiAgYnVpbGRCb2R5KCkge1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib2R5Jyk7XG4gICAgYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3VybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBSUFBQUQ4R08yakFBQUJoR2xEUTFCSlEwTWdjSEp2Wm1sc1pRQUFLSkY5a1QxSXcwQWN4VjlUdFZJcURuWVFjUWhTblN4SUZYSFVLaFNoUXFnVlduVXd1ZlFMbWpRa0tTNk9nbXZCd1kvRnFvT0xzNjRPcm9JZytBSGk1T2lrNkNJbC9pOHB0SWoxNExnZjcrNDk3dDRCUXIzTU5LdHJBdEIwMjB3bDRtSW11eW9HWHRHREVJS0lZVVJtbGpFblNVbDBIRi8zOFBIMUxzcXpPcC83Yy9TcE9Zc0JQcEY0bGhtbVRieEJQTDFwRzV6M2ljT3NLS3ZFNThUakpsMlErSkhyaXNkdm5Bc3VDend6YktaVDg4UmhZckhReGtvYnM2S3BFVThSUjFSTnAzd2g0N0hLZVl1elZxNnk1ajM1QzBNNWZXV1o2elNIa2NBaWxpQkJoSUlxU2lqRFJwUlduUlFMS2RxUGQvQVB1WDZKWEFxNVNtRGtXRUFGR21UWEQvNEh2N3UxOHBNeEx5a1VCN3BmSE9kakZBanNBbzJhNDN3Zk8wN2pCUEEvQTFkNnkxK3BBek9mcE5kYVd1UUk2TjhHTHE1Ym1ySUhYTzRBZzArR2JNcXU1S2NwNVBQQSt4bDlVeFlZdUFXQ2ExNXZ6WDJjUGdCcDZpcDVBeHdjQW1NRnlsN3Y4TzdlOXQ3K1BkUHM3d2VCMDNLdENUTi9TQUFBQUFsd1NGbHpBQUF1SXdBQUxpTUJlS1UvZGdBQUFBZDBTVTFGQitRR0RBc0FNa0FWQjAwQUFBQVpkRVZZZEVOdmJXMWxiblFBUTNKbFlYUmxaQ0IzYVhSb0lFZEpUVkJYZ1E0WEFBQUFQa2xFUVZSSXgyTThjZUlFQXluQTFOU1VKUFZNRERRR294YU1XakJxd2FnRm94WlFBekQrL2Z1WEpBMmsxaCtqY1RCcXdhZ0ZveGFNV2pBa0xBQUFFUThJaFVYNmFFRUFBQUFBU1VWT1JLNUNZSUk9XCIpJztcbiAgICBib2R5LnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgYm9keS5zdHlsZS5wYWRkaW5nID0gJzAnO1xuICAgIGJvZHkuc3R5bGUuaGVpZ2h0ID0gJzE0NHB4JztcbiAgICBib2R5LnN0eWxlLndpZHRoID0gJzI1NnB4JztcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQodGhpcy5idWlsZFNjZW5lKCkpO1xuXG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgU2NlbmUuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBTY2VuZS5cbiAgICovXG4gIGJ1aWxkU2NlbmUoKSB7XG4gICAgLy8gU2NlbmVcbiAgICBjb25zdCBzY2VuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Etc2NlbmUnKTtcbiAgICBzY2VuZS5zZXRBdHRyaWJ1dGUoJ2VtYmVkZGVkJywgJycpO1xuICAgIHNjZW5lLnNldEF0dHJpYnV0ZSgndnItbW9kZS11aScsICdmYWxzZScpO1xuXG4gICAgLy8gTW9kZWxcbiAgICBjb25zdCBlbnRpdHlNb2RlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG4gICAgY29uc3QgbW9kZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWdsdGYtbW9kZWwnKTtcbiAgICBtb2RlbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ21vZGVsJyk7XG4gICAgZW50aXR5TW9kZWwuYXBwZW5kQ2hpbGQobW9kZWwpO1xuICAgIHNjZW5lLmFwcGVuZENoaWxkKGVudGl0eU1vZGVsKTtcblxuICAgIGlmICh0aGlzLnBhcmFtcy5wbGFuZSkge1xuICAgICAgLy8gUGxhbmVcbiAgICAgIGNvbnN0IG1hcmtlclBsYW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1wbGFuZScpO1xuICAgICAgbWFya2VyUGxhbmUuc2V0QXR0cmlidXRlKCdpZCcsICdtYXJrZXJQbGFuZScpO1xuICAgICAgbWFya2VyUGxhbmUuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIGAke1RocmVlRE1vZGVsTG9hZGVyUHJldmlldy5ERUZBVUxUX09GRlNFVC54fSAke1RocmVlRE1vZGVsTG9hZGVyUHJldmlldy5ERUZBVUxUX09GRlNFVC55fSAke1RocmVlRE1vZGVsTG9hZGVyUHJldmlldy5ERUZBVUxUX09GRlNFVC56fWApO1xuICAgICAgbWFya2VyUGxhbmUuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsICctOTAgMCAwJyk7XG4gICAgICBtYXJrZXJQbGFuZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEnKTtcbiAgICAgIG1hcmtlclBsYW5lLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEnKTtcbiAgICAgIG1hcmtlclBsYW5lLnNldEF0dHJpYnV0ZSgnc3JjJywgVGhyZWVETW9kZWxMb2FkZXJQcmV2aWV3LkRFRkFVTFRfVEVYVFVSRSk7XG4gICAgICBtYXJrZXJQbGFuZS5zZXRBdHRyaWJ1dGUoJ3NoYWRvdycsICcnKTtcblxuICAgICAgc2NlbmUuYXBwZW5kQ2hpbGQobWFya2VyUGxhbmUpO1xuICAgIH1cblxuICAgIC8vIENhbWVyYVxuICAgIGNvbnN0IGVudGl0eUNhbWVyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XG4gICAgZW50aXR5Q2FtZXJhLnNldEF0dHJpYnV0ZSgnY2FtZXJhJywgJycpO1xuICAgIGVudGl0eUNhbWVyYS5zZXRBdHRyaWJ1dGUoJ2xvb2stY29udHJvbHMnLCAnJyk7XG4gICAgZW50aXR5Q2FtZXJhLnNldEF0dHJpYnV0ZSgnb3JiaXQtY29udHJvbHMnLCAnaW5pdGlhbFBvc2l0aW9uOiAwIDAgMjsgZW5hYmxlS2V5czogZmFsc2U7Jyk7XG4gICAgc2NlbmUuYXBwZW5kQ2hpbGQoZW50aXR5Q2FtZXJhKTtcblxuICAgIHJldHVybiBzY2VuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgaWZyYW1lIGNvbXBsZXRlLiBEZXBlbmRzIG9uIGxvYWQgdGltaW5nLlxuICAgKi9cbiAgaGFuZGxlSWZyYW1lQ29tcGxldGUoKSB7XG4gICAgaWYgKHRoaXMuaWZyYW1lRG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2NvbXBsZXRlJykge1xuICAgICAgdGhpcy5pZnJhbWVEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pZnJhbWVEb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG5cbiAgICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5pZnJhbWVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWwnKTtcbiAgICAgICAgICB0aGlzLm1hcmtlclBsYW5lID0gdGhpcy5pZnJhbWVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFya2VyUGxhbmUnKTtcblxuICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5jYWxsYmFja3MuaWZyYW1lQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5tb2RlbCA9IHRoaXMuaWZyYW1lRG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsJyk7XG4gICAgICB0aGlzLm1hcmtlclBsYW5lID0gdGhpcy5pZnJhbWVEb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFya2VyUGxhbmUnKTtcblxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uSWZyYW1lQ29tcGxldGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBwcmV2aWV3LlxuICAgKi9cbiAgc2hvdygpIHtcbiAgICB0aGlzLmlmcmFtZS5jbGFzc0xpc3QucmVtb3ZlKCdoNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLWRpc3BsYXktbm9uZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgcHJldmlldy5cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdGhpcy5pZnJhbWUuY2xhc3NMaXN0LmFkZCgnaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1kaXNwbGF5LW5vbmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbWFya2VyIHRleHR1cmUuIElmIG5vIHNyYyBwYXJhbWV0ZXIsIHJlbW92ZSB0ZXh1cmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbc3JjXSBCYXNlNjQgZW5jb2RlZCBpbWFnZSBzb3VyY2UgcGF0aC5cbiAgICovXG4gIHNldE1hcmtlclRleHR1cmUoc3JjID0gVGhyZWVETW9kZWxMb2FkZXJQcmV2aWV3LkRFRkFVTFRfVEVYVFVSRSkge1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47IC8vIE5vdCByZWFkeVxuICAgIH1cblxuICAgIGlmICghdGhpcy5tYXJrZXJQbGFuZSkge1xuICAgICAgcmV0dXJuOyAvLyBObyBtYXJrZXIgcGxhbmVcbiAgICB9XG5cbiAgICB0aGlzLm1hcmtlclBsYW5lLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbW9kZWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIE9iamVjdCBmaWxlIHBhdGguXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgUGFyYW1ldGVycy5cbiAgICovXG4gIHNldE1vZGVsKHBhdGgsIHBhcmFtcykge1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB0aGlzLm1vZGVsLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsIGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBHZXQgcG90ZW50aWFsIGNyb3NzLW9yaWdpbiBzb3VyY2VcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgSDVQLnNldFNvdXJjZShlbGVtZW50LCB7cGF0aDpwYXRofSwgSDVQRWRpdG9yLmNvbnRlbnRJZCk7XG4gICAgY29uc3Qgc3JjID0gZWxlbWVudC5zcmM7XG5cbiAgICBpZiAoIXNyYykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNldCBtb2RlbFxuICAgIHRoaXMubW9kZWwuc2V0QXR0cmlidXRlKCdnbHRmLW1vZGVsJywgc3JjKTtcblxuICAgIC8vIFNldCBnZW9tZXRyeVxuICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLnNjYWxlKSB7XG4gICAgICB0aGlzLnNldE1vZGVsU2NhbGUocGFyYW1zLnNjYWxlKTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5zZXRNb2RlbFBvc2l0aW9uKHBhcmFtcy5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucm90YXRpb24pIHtcbiAgICAgIHRoaXMuc2V0TW9kZWxSb3RhdGlvbihwYXJhbXMucm90YXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMubW9kZWwuc2V0QXR0cmlidXRlKCd2aXNpYmxlJywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IG1vZGVsIHNjYWxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgcmVsYXRpdmUgdG8gb3JpZ2luYWwgbW9kZWwgc2NhbGUuXG4gICAqL1xuICBzZXRNb2RlbFNjYWxlKHNjYWxlKSB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIXNjYWxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2NhbGUgPSBNYXRoLm1heCgwLjAxLCBzY2FsZSk7XG5cbiAgICB0aGlzLm1vZGVsLnNldEF0dHJpYnV0ZSgnc2NhbGUnLCBgJHtzY2FsZX0gJHtzY2FsZX0gJHtzY2FsZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbW9kZWwgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb29yZGluYXRlcyBDb29yZGluYXRlcyByZWxhdGl2ZSB0byBtYXJrZXIuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb29yZGluYXRlcy54IFggY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvb3JkaW5hdGVzLnkgWSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY29vcmRpbmF0ZXMueiBaIGNvb3JkaW5hdGUuXG4gICAqL1xuICBzZXRNb2RlbFBvc2l0aW9uKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIWNvb3JkaW5hdGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeCA9IGNvb3JkaW5hdGVzLnggKyBUaHJlZURNb2RlbExvYWRlclByZXZpZXcuREVGQVVMVF9PRkZTRVQueDtcbiAgICBjb25zdCB5ID0gY29vcmRpbmF0ZXMueSArIFRocmVlRE1vZGVsTG9hZGVyUHJldmlldy5ERUZBVUxUX09GRlNFVC55O1xuICAgIGNvbnN0IHogPSBjb29yZGluYXRlcy56ICsgVGhyZWVETW9kZWxMb2FkZXJQcmV2aWV3LkRFRkFVTFRfT0ZGU0VULno7XG5cbiAgICB0aGlzLm1vZGVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBgJHt4fSAke3l9ICR7en1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbW9kZWwgcm90YXRpb24uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhbmdsZXMgQW5nbGVzIHJlbGF0aXZlIHRvIG1hcmtlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlcy54IFggYW5nbGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZXMueSBZIGFuZ2xlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGVzLnogWiBhbmdsZS5cbiAgICovXG4gIHNldE1vZGVsUm90YXRpb24oYW5nbGVzKSB7XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIWFuZ2xlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubW9kZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIGAke2FuZ2xlcy54fSAke2FuZ2xlcy55fSAke2FuZ2xlcy56fWApO1xuICB9XG59XG5cbi8vIERlZmF1bHQgb2Zmc2V0XG5UaHJlZURNb2RlbExvYWRlclByZXZpZXcuREVGQVVMVF9PRkZTRVQgPSB7eDogMCwgeTogLTEsIHo6IDB9O1xuXG4vLyBXaGl0ZSB0ZXh0dXJlXG5UaHJlZURNb2RlbExvYWRlclByZXZpZXcuREVGQVVMVF9URVhUVVJFID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBSUFBQUNRZDFQZUFBQUJoV2xEUTFCSlEwTWdjSEp2Wm1sc1pRQUFLSkY5a1QxSXcwQWN4VjlidFNvVkJ6T0lPR1NvZ21CQlZNUlJxMUNFQ3FGV2FOWEI1TklQb1VsRGt1TGlLTGdXSFB4WXJEcTRPT3ZxNENvSWdoOGdUbzVPaWk1UzR2K1NRb3NZRDQ3NzhlN2U0KzRkRUt5Vm1HYTFqUUdhYnB1cFJGek1aRmZFOENzNkVJR0FFWFRKekRKbUpTa0ozL0YxandCZjcySTh5Ly9jbjZOSHpWa01DSWpFTTh3d2JlSjE0cWxOMitDOFR5eXdvcXdTbnhPUG1uUkI0a2V1S3g2L2NTNjRIT1NaZ3BsT3pSRUx4R0toaFpVV1prVlRJNTRranFxYVR2bkJqTWNxNXkzT1dxbkNHdmZrTDR6azlPVWxydE1jUkFJTFdJUUVFUW9xMkVBSk5tSzA2cVJZU05GKzNNYy80UG9sY2luazJnQWp4enpLMENDN2Z2QS8rTjJ0bFo4WTk1SWljYUQ5eFhFK2hvRHdMbEN2T3M3M3NlUFVUNERRTTNDbE4vM2xHakQ5U1hxMXFVV1BnTjV0NE9LNnFTbDd3T1VPMFA5a3lLYnNTaUdhd1h3ZWVEK2piOG9DZmJkQTk2clhXMk1mcHc5QW1ycEszZ0FIaDhCd2diTFhmTjdkMmRyYnYyY2EvZjBBUmpGeWxSMFoyZklBQUFBSmNFaFpjd0FBTGlNQUFDNGpBWGlsUDNZQUFBQUhkRWxOUlFma0Jnd1VLVGRqUTRoa0FBQUFHWFJGV0hSRGIyMXRaVzUwQUVOeVpXRjBaV1FnZDJsMGFDQkhTVTFRVjRFT0Z3QUFBQXhKUkVGVUNOZGorUC8vUHdBRi9nTCszTXhaNXdBQUFBQkpSVTVFcmtKZ2dnPT0nO1xuXG5leHBvcnQgZGVmYXVsdCBUaHJlZURNb2RlbExvYWRlclByZXZpZXc7XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scripts/h5peditor-3d-model-loader-preview.js\n");

/***/ }),

/***/ "./src/scripts/h5peditor-3d-model-loader.js":
/*!**************************************************!*\
  !*** ./src/scripts/h5peditor-3d-model-loader.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _h5peditor_3d_model_loader_conversion_dropzone_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./h5peditor-3d-model-loader-conversion-dropzone.js */ \"./src/scripts/h5peditor-3d-model-loader-conversion-dropzone.js\");\n/* harmony import */ var _h5peditor_3d_model_loader_preview_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./h5peditor-3d-model-loader-preview.js */ \"./src/scripts/h5peditor-3d-model-loader-preview.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\nvar ThreeDModelLoader = /*#__PURE__*/function () {\n  /**\n   * Used to load additional GLTF resources\n   * @class H5PEditor.ThreeDModelLoader\n   *\n   * @param {object} parent Parent object in semantics hierarchy.\n   * @param {object} field Fields in semantics where widget is used.\n   * @param {object} params Parameters of form.\n   * @param {function} setValue Callback to update the form value.\n   *\n   * @throws {Error} No image found.\n   */\n  function ThreeDModelLoader(parent, field, params, setValue) {\n    var _this = this;\n\n    this.parent = parent;\n    this.field = field;\n    this.params = params;\n    this.setValue = setValue; // Sanitize field parameters\n\n    this.field.threeDModelLoader = this.field.threeDModelLoader || {};\n    this.field.threeDModelLoader.fileTypeExtensions = this.field.threeDModelLoader.fileTypeExtensions || ['gltf', 'glb'];\n    this.field.threeDModelLoader.geometryPath = this.field.threeDModelLoader.geometryPath || '';\n    this.field.threeDModelLoader.planePatternPath = this.field.threeDModelLoader.planePatternPath || ''; // IE11 can neither handle preview nor conversion\n\n    this.canPreview = window.navigator.userAgent.indexOf('Trident/') === -1;\n    this.canConvert = window.navigator.userAgent.indexOf('Trident/') === -1;\n    this.queue = []; // Create the wrapper:\n\n    this.$container = H5P.jQuery('<div>', {\n      'class': 'field h5peditor-3d-model-loader-container'\n    });\n    var widgetName = this.field.type;\n    this.fieldInstance = new H5PEditor.widgets[widgetName](parent, field, params, setValue);\n    this.fieldInstance.appendTo(this.$container); // Errors\n\n    this.$errors = this.$container.children().children('.h5p-errors');\n\n    if (this.canPreview) {\n      // Create preview\n      this.preview = new _h5peditor_3d_model_loader_preview_js__WEBPACK_IMPORTED_MODULE_1__.default({\n        plane: this.field.threeDModelLoader.planePatternPath !== ''\n      }, {\n        onIframeComplete: function onIframeComplete() {// Potentially init stuff only now\n        }\n      });\n      this.$container.get(0).appendChild(this.preview.getDOM()); // Update scene plane for marker\n\n      if (this.field.threeDModelLoader.planePatternPath) {\n        var arMarker = H5PEditor.findField(this.field.threeDModelLoader.planePatternPath, this.parent);\n\n        if (arMarker) {\n          arMarker.on('removedMarkerPattern', function () {\n            _this.preview.setMarkerTexture();\n          });\n          arMarker.on('addedMarkerPattern', function (event) {\n            _this.preview.setMarkerTexture(event.data);\n          });\n        }\n      }\n    }\n\n    this.parent.ready(function () {\n      if (_this.canConvert) {\n        // Create dropzone\n        _this.dropzone = _this.dropzone || new _h5peditor_3d_model_loader_conversion_dropzone_js__WEBPACK_IMPORTED_MODULE_0__.default(function (result) {\n          _this.handleConversionDone(result);\n        });\n\n        var container = _this.$container.get(0);\n\n        container.parentNode.insertBefore(_this.dropzone.getDOM(), container.nextSibling);\n      } // It might be better to have a complete geometry editor widget\n\n\n      var geometryPath = _this.field.threeDModelLoader.geometryPath;\n\n      if (_this.field.threeDModelLoader.geometryPath !== '') {\n        // Listen for scale change\n        _this.rowScale = H5PEditor.findField(\"\".concat(geometryPath, \"/scale\"), _this.parent);\n\n        if (_this.rowScale && _this.canPreview) {\n          _this.rowScale.on('changed', function (event) {\n            _this.preview.setModelScale(parseFloat(event.data.scale) / 100);\n          });\n        } // Listen for position change\n\n\n        _this.rowPosition = H5PEditor.findField(\"\".concat(geometryPath, \"/position\"), _this.parent);\n\n        if (_this.rowPosition && _this.canPreview) {\n          _this.rowPosition.on('changed', function (event) {\n            _this.preview.setModelPosition({\n              x: parseFloat(event.data.x),\n              y: parseFloat(event.data.y),\n              z: parseFloat(event.data.z)\n            });\n          });\n        } // Listen for rotation change\n\n\n        _this.rowRotation = H5PEditor.findField(\"\".concat(geometryPath, \"/rotation\"), _this.parent);\n\n        if (_this.rowRotation && _this.canPreview) {\n          _this.rowRotation.on('changed', function (event) {\n            _this.preview.setModelRotation({\n              x: parseFloat(event.data.x),\n              y: parseFloat(event.data.y),\n              z: parseFloat(event.data.z)\n            });\n          });\n        }\n      }\n    }); // Changes\n\n    this.changes = [];\n    this.fileIcon = document.createElement('div');\n    this.fileIcon.classList.add('h5peditor-3d-model-loader-file-icon'); // Update icon on loadup\n\n    H5PEditor.followField(this.parent, this.field.name, function (event) {\n      if (!event || !event.path) {\n        _this.resetModel();\n\n        return;\n      } // Only gltf supported\n\n\n      var extension = event.path.split('.').pop().toLowerCase();\n\n      if (_this.field.threeDModelLoader.fileTypeExtensions.indexOf(extension) === -1) {\n        return;\n      }\n\n      _this.setModel(event.path);\n    });\n    this.fieldInstance.on('uploadProgress', function () {\n      if (_this.canPreview) {\n        _this.preview.hide();\n      }\n\n      _this.resetGeometry();\n    }); // React on file changes\n\n    this.fieldInstance.changes.push(function (event) {\n      if (!event) {\n        _this.resetModel();\n      } else {\n        _this.handleFileUploaded(event.path);\n      }\n    });\n  }\n  /**\n   * Reset geometry.\n   */\n\n\n  var _proto = ThreeDModelLoader.prototype;\n\n  _proto.resetGeometry = function resetGeometry() {\n    [this.rowScale, this.rowPosition, this.rowRotation].forEach(function (row) {\n      if (!row) {\n        return;\n      }\n\n      row.children.forEach(function (child) {\n        child.$input.val(child.field[\"default\"]);\n        child.$input.change();\n      });\n    });\n  }\n  /**\n   * Reset model.\n   */\n  ;\n\n  _proto.resetModel = function resetModel() {\n    if (this.canPreview) {\n      this.preview.setModel();\n      this.preview.hide();\n    }\n\n    this.resetGeometry();\n  }\n  /**\n   * Set model in preview.\n   * @param {string} path Full URL path to model file.\n   */\n  ;\n\n  _proto.setModel = function setModel(path) {\n    var extension = path.replace(/#tmp$/, '').split('.').pop().toLowerCase();\n    this.showFileIcon(extension);\n\n    if (this.canConvert) {\n      this.dropzone.hide();\n    }\n\n    if (this.canPreview) {\n      this.preview.setModel(path, this.getGeometry());\n      this.preview.show();\n    }\n  }\n  /**\n   * Get current geometry.\n   * @return {object} Geometry data.\n   */\n  ;\n\n  _proto.getGeometry = function getGeometry() {\n    // Yes, you'd make sure the children are in place and number fields...\n    return {\n      scale: parseFloat(this.rowScale.children[0].$input.val()) / 100,\n      position: {\n        x: parseFloat(this.rowPosition.children[0].$input.val()),\n        y: parseFloat(this.rowPosition.children[1].$input.val()),\n        z: parseFloat(this.rowPosition.children[2].$input.val())\n      },\n      rotation: {\n        x: parseFloat(this.rowRotation.children[0].$input.val()),\n        y: parseFloat(this.rowRotation.children[1].$input.val()),\n        z: parseFloat(this.rowRotation.children[2].$input.val())\n      }\n    };\n  }\n  /**\n   * Handle new file uploaded.\n   * @param {string} path Path to model.\n   */\n  ;\n\n  _proto.handleFileUploaded = function handleFileUploaded(path) {\n    var _this2 = this;\n\n    var extension = path.split('#').slice(0, -1).join('#').split('.').slice(-1)[0].toLowerCase(); // Only gltf supported\n\n    if (this.field.threeDModelLoader.fileTypeExtensions.indexOf(extension) === -1) {\n      this.$errors.append(H5PEditor.createError(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'filetypeNotSupported')));\n      this.removeFile();\n\n      if (this.canConvert) {\n        this.dropzone.hide();\n      }\n\n      return;\n    }\n    /*\n     * GLTF files are JSON files, but may not be in embedded format with base64\n     * encoded textures or bin files. Would require to upload assets separately\n     * and encode them. For now, only allow GLTF in embedded format and GLB.\n     */\n\n\n    if (extension === 'gltf') {\n      // Get potential cross-origin source\n      var element = document.createElement('div');\n      H5P.setSource(element, {\n        path: path\n      }, H5PEditor.contentId);\n      var src = element.src; // Try to parse JSON from file\n\n      try {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', src);\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState !== 4) {\n            return;\n          }\n\n          try {\n            var json = JSON.parse(xhr.responseText); // Three.JS cannot handle glTF v1.0.\n\n            if (!_this2.isGLTFVersionTwo(json)) {\n              _this2.handleError(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'onlyVersionTwo'));\n\n              return;\n            } // Can't upload multiple files or zip files, offer conversion\n\n\n            if (!_this2.isGLTFEmbeddedFormat(json)) {\n              if (_this2.canConvert) {\n                _this2.handleError(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'onlyEmbeddedAssets'));\n\n                _this2.handleEmbeddedAssets();\n              } else {\n                _this2.handleError(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'browserCannotConvert'));\n              }\n\n              return;\n            }\n          } catch (error) {\n            _this2.handleError(\"\".concat(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'fileDamaged'), \" (\").concat(error, \")\"));\n\n            return;\n          }\n\n          _this2.setModel(path);\n        };\n\n        xhr.send();\n      } catch (error) {\n        this.handleError(\"\".concat(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'fileDamaged'), \" (\").concat(error, \")\"));\n        return;\n      }\n    } else {\n      this.setModel(path);\n    }\n  }\n  /**\n   * Handle embedded assets uploaded.\n   */\n  ;\n\n  _proto.handleEmbeddedAssets = function handleEmbeddedAssets() {\n    // Add dropzone to DOM\n    if (this.canConvert) {\n      this.dropzone.show();\n    }\n  }\n  /**\n   * Handle conversion done.\n   * @param {object} result Result.\n   * @param {object} [result.file] File data.\n   * @param {string} [result.error] Error message.\n   */\n  ;\n\n  _proto.handleConversionDone = function handleConversionDone(result) {\n    if (result.error) {\n      this.handleError(\"\".concat(H5PEditor.t('H5PEditor.ThreeDModelLoader', 'conversionError'), \" (\").concat(result.error, \")\"));\n      return;\n    } // Hope all's sanitized here with the file\n\n\n    this.fieldInstance.upload(result.file, 'foo.glb');\n\n    if (this.canConvert) {\n      this.dropzone.hide();\n    }\n  }\n  /**\n   * Check JSON of GLTF file for being embedded format.\n   * @param {object} json GLTF file as JSON object.\n   * @return {boolean} True, if is embedded format, else false.\n   */\n  ;\n\n  _proto.isGLTFEmbeddedFormat = function isGLTFEmbeddedFormat(json) {\n    var objects = this.findObjects(json, 'uri', '');\n    var containsExternalReference = objects.some(function (obj) {\n      return obj.uri.substr(0, 5) !== 'data:';\n    });\n    return !containsExternalReference;\n  }\n  /**\n   * Check JSON of GLTF file for version strings.\n   * @param {object} json GLTF file as JSON object.\n   * @return {boolean} True, if no version is of 1.0.\n   */\n  ;\n\n  _proto.isGLTFVersionTwo = function isGLTFVersionTwo(json) {\n    var objects = this.findObjects(json, 'version', '');\n    var containsOnePointO = objects.some(function (obj) {\n      return obj.version === '1.0';\n    });\n    return !containsOnePointO;\n  }\n  /**\n   * Get objects with particular key (and value) from object.\n   * @param {object} obj Object to search in.\n   * @param {string} key Key to search for.\n   * @param {string} val Value to search for.\n   */\n  ;\n\n  _proto.findObjects = function findObjects(obj, key, val) {\n    var objects = [];\n\n    for (var i in obj) {\n      if (!obj.hasOwnProperty(i)) {\n        continue;\n      }\n\n      if (_typeof(obj[i]) == 'object') {\n        objects = objects.concat(this.findObjects(obj[i], key, val));\n      } else {\n        if (i === key && obj[i] === val || i === key && val === '') {\n          objects.push(obj);\n        } else if (obj[i] === val && key === '') {\n          if (objects.lastIndexOf(obj) === -1) {\n            objects.push(obj);\n          }\n        }\n      }\n    }\n\n    return objects;\n  }\n  /**\n   * Handle error.\n   * @param {string} errorMessage Error message text.\n   */\n  ;\n\n  _proto.handleError = function handleError(errorMessage) {\n    this.$errors.empty();\n    this.$errors.append(H5PEditor.createError(errorMessage));\n    this.removeFile();\n  }\n  /**\n   * Remove file from widget.\n   */\n  ;\n\n  _proto.removeFile = function removeFile() {\n    delete this.fieldInstance.params;\n    this.fieldInstance.setValue(this.fieldInstance.field);\n    this.fieldInstance.addFile();\n\n    for (var i = 0; i < this.fieldInstance.changes.length; i++) {\n      this.fieldInstance.changes[i]();\n    }\n  }\n  /**\n   * Show file pseudo icon.\n   * @param {string} type File type.\n   */\n  ;\n\n  _proto.showFileIcon = function showFileIcon(type) {\n    var _this3 = this;\n\n    // Wait for image. File.addFile() might not have completed yet\n    var waitForImg = function waitForImg(timeout) {\n      timeout = timeout || 500;\n\n      if (timeout <= 0) {\n        return;\n      }\n\n      var img = _this3.fieldInstance.$file.find('img').get(0);\n\n      if (img) {\n        _this3.fileIcon.title = type;\n        _this3.fileIcon.innerText = type;\n        img.style.display = 'none';\n\n        _this3.fieldInstance.$file.find('.thumbnail').get(0).appendChild(_this3.fileIcon);\n      } else {\n        setTimeout(function () {\n          waitForImg(timeout - 20);\n        }, 20);\n      }\n    };\n\n    waitForImg();\n  }\n  /**\n   * Append field to wrapper. Invoked by H5P core.\n   * @param {H5P.jQuery} $wrapper Wrapper.\n   */\n  ;\n\n  _proto.appendTo = function appendTo($wrapper) {\n    this.$container.appendTo($wrapper);\n  }\n  /**\n   * Validate current values. Invoked by H5P core.\n   * @return {boolean} True, if current value is valid, else false.\n   */\n  ;\n\n  _proto.validate = function validate() {\n    return this.fieldInstance.validate();\n  }\n  /**\n   * Remove self. Invoked by H5P core.\n   */\n  ;\n\n  _proto.remove = function remove() {\n    this.$container.remove();\n  };\n\n  return ThreeDModelLoader;\n}();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThreeDModelLoader);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWVkaXRvci0zZC1tb2RlbC1sb2FkZXIvLi9zcmMvc2NyaXB0cy9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLmpzPzhmMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRocmVlRE1vZGVsTG9hZGVyQ29udmVyc2lvbkRyb3B6b25lIGZyb20gJy4vaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1jb252ZXJzaW9uLWRyb3B6b25lLmpzJztcbmltcG9ydCBUaHJlZURNb2RlbExvYWRlclByZXZpZXcgZnJvbSAnLi9oNXBlZGl0b3ItM2QtbW9kZWwtbG9hZGVyLXByZXZpZXcuanMnO1xuXG5jbGFzcyBUaHJlZURNb2RlbExvYWRlciB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGxvYWQgYWRkaXRpb25hbCBHTFRGIHJlc291cmNlc1xuICAgKiBAY2xhc3MgSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJlbnQgUGFyZW50IG9iamVjdCBpbiBzZW1hbnRpY3MgaGllcmFyY2h5LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZmllbGQgRmllbGRzIGluIHNlbWFudGljcyB3aGVyZSB3aWRnZXQgaXMgdXNlZC5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyBQYXJhbWV0ZXJzIG9mIGZvcm0uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHNldFZhbHVlIENhbGxiYWNrIHRvIHVwZGF0ZSB0aGUgZm9ybSB2YWx1ZS5cbiAgICpcbiAgICogQHRocm93cyB7RXJyb3J9IE5vIGltYWdlIGZvdW5kLlxuICAgKi9cbiAgY29uc3RydWN0b3IocGFyZW50LCBmaWVsZCwgcGFyYW1zLCBzZXRWYWx1ZSkge1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB0aGlzLnNldFZhbHVlID0gc2V0VmFsdWU7XG5cbiAgICAvLyBTYW5pdGl6ZSBmaWVsZCBwYXJhbWV0ZXJzXG4gICAgdGhpcy5maWVsZC50aHJlZURNb2RlbExvYWRlciA9IHRoaXMuZmllbGQudGhyZWVETW9kZWxMb2FkZXIgfHwge307XG4gICAgdGhpcy5maWVsZC50aHJlZURNb2RlbExvYWRlci5maWxlVHlwZUV4dGVuc2lvbnMgPSB0aGlzLmZpZWxkLnRocmVlRE1vZGVsTG9hZGVyLmZpbGVUeXBlRXh0ZW5zaW9ucyB8fCBbJ2dsdGYnLCAnZ2xiJ107XG4gICAgdGhpcy5maWVsZC50aHJlZURNb2RlbExvYWRlci5nZW9tZXRyeVBhdGggPSB0aGlzLmZpZWxkLnRocmVlRE1vZGVsTG9hZGVyLmdlb21ldHJ5UGF0aCB8fCAnJztcbiAgICB0aGlzLmZpZWxkLnRocmVlRE1vZGVsTG9hZGVyLnBsYW5lUGF0dGVyblBhdGggPSB0aGlzLmZpZWxkLnRocmVlRE1vZGVsTG9hZGVyLnBsYW5lUGF0dGVyblBhdGggfHwgJyc7XG5cbiAgICAvLyBJRTExIGNhbiBuZWl0aGVyIGhhbmRsZSBwcmV2aWV3IG5vciBjb252ZXJzaW9uXG4gICAgdGhpcy5jYW5QcmV2aWV3ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudC8nKSA9PT0gLTE7XG4gICAgdGhpcy5jYW5Db252ZXJ0ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudC8nKSA9PT0gLTE7XG5cbiAgICB0aGlzLnF1ZXVlID0gW107XG5cbiAgICAvLyBDcmVhdGUgdGhlIHdyYXBwZXI6XG4gICAgdGhpcy4kY29udGFpbmVyID0gSDVQLmpRdWVyeSgnPGRpdj4nLCB7XG4gICAgICAnY2xhc3MnOiAnZmllbGQgaDVwZWRpdG9yLTNkLW1vZGVsLWxvYWRlci1jb250YWluZXInXG4gICAgfSk7XG5cbiAgICBjb25zdCB3aWRnZXROYW1lID0gdGhpcy5maWVsZC50eXBlO1xuICAgIHRoaXMuZmllbGRJbnN0YW5jZSA9IG5ldyBINVBFZGl0b3Iud2lkZ2V0c1t3aWRnZXROYW1lXShwYXJlbnQsIGZpZWxkLCBwYXJhbXMsIHNldFZhbHVlKTtcbiAgICB0aGlzLmZpZWxkSW5zdGFuY2UuYXBwZW5kVG8odGhpcy4kY29udGFpbmVyKTtcblxuICAgIC8vIEVycm9yc1xuICAgIHRoaXMuJGVycm9ycyA9IHRoaXMuJGNvbnRhaW5lci5jaGlsZHJlbigpLmNoaWxkcmVuKCcuaDVwLWVycm9ycycpO1xuXG4gICAgaWYgKHRoaXMuY2FuUHJldmlldykge1xuICAgICAgLy8gQ3JlYXRlIHByZXZpZXdcbiAgICAgIHRoaXMucHJldmlldyA9IG5ldyBUaHJlZURNb2RlbExvYWRlclByZXZpZXcoXG4gICAgICAgIHtcbiAgICAgICAgICBwbGFuZTogdGhpcy5maWVsZC50aHJlZURNb2RlbExvYWRlci5wbGFuZVBhdHRlcm5QYXRoICE9PSAnJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgb25JZnJhbWVDb21wbGV0ZTogKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFBvdGVudGlhbGx5IGluaXQgc3R1ZmYgb25seSBub3dcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuJGNvbnRhaW5lci5nZXQoMCkuYXBwZW5kQ2hpbGQodGhpcy5wcmV2aWV3LmdldERPTSgpKTtcblxuICAgICAgLy8gVXBkYXRlIHNjZW5lIHBsYW5lIGZvciBtYXJrZXJcbiAgICAgIGlmICh0aGlzLmZpZWxkLnRocmVlRE1vZGVsTG9hZGVyLnBsYW5lUGF0dGVyblBhdGgpIHtcbiAgICAgICAgY29uc3QgYXJNYXJrZXIgPSBINVBFZGl0b3IuZmluZEZpZWxkKHRoaXMuZmllbGQudGhyZWVETW9kZWxMb2FkZXIucGxhbmVQYXR0ZXJuUGF0aCwgdGhpcy5wYXJlbnQpO1xuICAgICAgICBpZiAoYXJNYXJrZXIpIHtcbiAgICAgICAgICBhck1hcmtlci5vbigncmVtb3ZlZE1hcmtlclBhdHRlcm4nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXcuc2V0TWFya2VyVGV4dHVyZSgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYXJNYXJrZXIub24oJ2FkZGVkTWFya2VyUGF0dGVybicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmV2aWV3LnNldE1hcmtlclRleHR1cmUoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBhcmVudC5yZWFkeSggKCkgPT4ge1xuXG4gICAgICBpZiAodGhpcy5jYW5Db252ZXJ0KSB7XG4gICAgICAgIC8vIENyZWF0ZSBkcm9wem9uZVxuICAgICAgICB0aGlzLmRyb3B6b25lID0gdGhpcy5kcm9wem9uZSB8fCBuZXcgVGhyZWVETW9kZWxMb2FkZXJDb252ZXJzaW9uRHJvcHpvbmUoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlQ29udmVyc2lvbkRvbmUocmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJGNvbnRhaW5lci5nZXQoMCk7XG4gICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRyb3B6b25lLmdldERPTSgpLCBjb250YWluZXIubmV4dFNpYmxpbmcpO1xuICAgICAgfVxuXG4gICAgICAvLyBJdCBtaWdodCBiZSBiZXR0ZXIgdG8gaGF2ZSBhIGNvbXBsZXRlIGdlb21ldHJ5IGVkaXRvciB3aWRnZXRcbiAgICAgIGNvbnN0IGdlb21ldHJ5UGF0aCA9IHRoaXMuZmllbGQudGhyZWVETW9kZWxMb2FkZXIuZ2VvbWV0cnlQYXRoO1xuXG4gICAgICBpZiAodGhpcy5maWVsZC50aHJlZURNb2RlbExvYWRlci5nZW9tZXRyeVBhdGggIT09ICcnKSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3Igc2NhbGUgY2hhbmdlXG4gICAgICAgIHRoaXMucm93U2NhbGUgPSBINVBFZGl0b3IuZmluZEZpZWxkKGAke2dlb21ldHJ5UGF0aH0vc2NhbGVgLCB0aGlzLnBhcmVudCk7XG4gICAgICAgIGlmICh0aGlzLnJvd1NjYWxlICYmIHRoaXMuY2FuUHJldmlldykge1xuICAgICAgICAgIHRoaXMucm93U2NhbGUub24oJ2NoYW5nZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJldmlldy5zZXRNb2RlbFNjYWxlKFxuICAgICAgICAgICAgICBwYXJzZUZsb2F0KGV2ZW50LmRhdGEuc2NhbGUpIC8gMTAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBwb3NpdGlvbiBjaGFuZ2VcbiAgICAgICAgdGhpcy5yb3dQb3NpdGlvbiA9IEg1UEVkaXRvci5maW5kRmllbGQoYCR7Z2VvbWV0cnlQYXRofS9wb3NpdGlvbmAsIHRoaXMucGFyZW50KTtcbiAgICAgICAgaWYgKHRoaXMucm93UG9zaXRpb24gJiYgdGhpcy5jYW5QcmV2aWV3KSB7XG4gICAgICAgICAgdGhpcy5yb3dQb3NpdGlvbi5vbignY2hhbmdlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmV2aWV3LnNldE1vZGVsUG9zaXRpb24oe1xuICAgICAgICAgICAgICB4OiBwYXJzZUZsb2F0KGV2ZW50LmRhdGEueCksXG4gICAgICAgICAgICAgIHk6IHBhcnNlRmxvYXQoZXZlbnQuZGF0YS55KSxcbiAgICAgICAgICAgICAgejogcGFyc2VGbG9hdChldmVudC5kYXRhLnopXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExpc3RlbiBmb3Igcm90YXRpb24gY2hhbmdlXG4gICAgICAgIHRoaXMucm93Um90YXRpb24gPSBINVBFZGl0b3IuZmluZEZpZWxkKGAke2dlb21ldHJ5UGF0aH0vcm90YXRpb25gLCB0aGlzLnBhcmVudCk7XG4gICAgICAgIGlmICh0aGlzLnJvd1JvdGF0aW9uICYmIHRoaXMuY2FuUHJldmlldykge1xuICAgICAgICAgIHRoaXMucm93Um90YXRpb24ub24oJ2NoYW5nZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJldmlldy5zZXRNb2RlbFJvdGF0aW9uKHtcbiAgICAgICAgICAgICAgeDogcGFyc2VGbG9hdChldmVudC5kYXRhLngpLFxuICAgICAgICAgICAgICB5OiBwYXJzZUZsb2F0KGV2ZW50LmRhdGEueSksXG4gICAgICAgICAgICAgIHo6IHBhcnNlRmxvYXQoZXZlbnQuZGF0YS56KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENoYW5nZXNcbiAgICB0aGlzLmNoYW5nZXMgPSBbXTtcblxuICAgIHRoaXMuZmlsZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmZpbGVJY29uLmNsYXNzTGlzdC5hZGQoJ2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXItZmlsZS1pY29uJyk7XG5cbiAgICAvLyBVcGRhdGUgaWNvbiBvbiBsb2FkdXBcbiAgICBINVBFZGl0b3IuZm9sbG93RmllbGQodGhpcy5wYXJlbnQsIHRoaXMuZmllbGQubmFtZSwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWV2ZW50IHx8ICFldmVudC5wYXRoKSB7XG4gICAgICAgIHRoaXMucmVzZXRNb2RlbCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgZ2x0ZiBzdXBwb3J0ZWRcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGV2ZW50LnBhdGguc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHRoaXMuZmllbGQudGhyZWVETW9kZWxMb2FkZXIuZmlsZVR5cGVFeHRlbnNpb25zLmluZGV4T2YoZXh0ZW5zaW9uKSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldE1vZGVsKGV2ZW50LnBhdGgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5maWVsZEluc3RhbmNlLm9uKCd1cGxvYWRQcm9ncmVzcycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmNhblByZXZpZXcpIHtcbiAgICAgICAgdGhpcy5wcmV2aWV3LmhpZGUoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXNldEdlb21ldHJ5KCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWFjdCBvbiBmaWxlIGNoYW5nZXNcbiAgICB0aGlzLmZpZWxkSW5zdGFuY2UuY2hhbmdlcy5wdXNoKChldmVudCkgPT4ge1xuICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICB0aGlzLnJlc2V0TW9kZWwoKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmhhbmRsZUZpbGVVcGxvYWRlZChldmVudC5wYXRoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBnZW9tZXRyeS5cbiAgICovXG4gIHJlc2V0R2VvbWV0cnkoKSB7XG4gICAgW3RoaXMucm93U2NhbGUsIHRoaXMucm93UG9zaXRpb24sIHRoaXMucm93Um90YXRpb25dLmZvckVhY2gocm93ID0+IHtcbiAgICAgIGlmICghcm93KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcm93LmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICBjaGlsZC4kaW5wdXQudmFsKGNoaWxkLmZpZWxkLmRlZmF1bHQpO1xuICAgICAgICBjaGlsZC4kaW5wdXQuY2hhbmdlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBtb2RlbC5cbiAgICovXG4gIHJlc2V0TW9kZWwoKSB7XG4gICAgaWYgKHRoaXMuY2FuUHJldmlldykge1xuICAgICAgdGhpcy5wcmV2aWV3LnNldE1vZGVsKCk7XG4gICAgICB0aGlzLnByZXZpZXcuaGlkZSgpO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXRHZW9tZXRyeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBtb2RlbCBpbiBwcmV2aWV3LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBGdWxsIFVSTCBwYXRoIHRvIG1vZGVsIGZpbGUuXG4gICAqL1xuICBzZXRNb2RlbChwYXRoKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gcGF0aC5yZXBsYWNlKC8jdG1wJC8sICcnKS5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICB0aGlzLnNob3dGaWxlSWNvbihleHRlbnNpb24pO1xuXG4gICAgaWYgKHRoaXMuY2FuQ29udmVydCkge1xuICAgICAgdGhpcy5kcm9wem9uZS5oaWRlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2FuUHJldmlldykge1xuICAgICAgdGhpcy5wcmV2aWV3LnNldE1vZGVsKHBhdGgsIHRoaXMuZ2V0R2VvbWV0cnkoKSk7XG4gICAgICB0aGlzLnByZXZpZXcuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7b2JqZWN0fSBHZW9tZXRyeSBkYXRhLlxuICAgKi9cbiAgZ2V0R2VvbWV0cnkoKSB7XG4gICAgLy8gWWVzLCB5b3UnZCBtYWtlIHN1cmUgdGhlIGNoaWxkcmVuIGFyZSBpbiBwbGFjZSBhbmQgbnVtYmVyIGZpZWxkcy4uLlxuICAgIHJldHVybiB7XG4gICAgICBzY2FsZTogcGFyc2VGbG9hdCh0aGlzLnJvd1NjYWxlLmNoaWxkcmVuWzBdLiRpbnB1dC52YWwoKSkgLyAxMDAsXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiBwYXJzZUZsb2F0KHRoaXMucm93UG9zaXRpb24uY2hpbGRyZW5bMF0uJGlucHV0LnZhbCgpKSxcbiAgICAgICAgeTogcGFyc2VGbG9hdCh0aGlzLnJvd1Bvc2l0aW9uLmNoaWxkcmVuWzFdLiRpbnB1dC52YWwoKSksXG4gICAgICAgIHo6IHBhcnNlRmxvYXQodGhpcy5yb3dQb3NpdGlvbi5jaGlsZHJlblsyXS4kaW5wdXQudmFsKCkpLFxuICAgICAgfSxcbiAgICAgIHJvdGF0aW9uOiB7XG4gICAgICAgIHg6IHBhcnNlRmxvYXQodGhpcy5yb3dSb3RhdGlvbi5jaGlsZHJlblswXS4kaW5wdXQudmFsKCkpLFxuICAgICAgICB5OiBwYXJzZUZsb2F0KHRoaXMucm93Um90YXRpb24uY2hpbGRyZW5bMV0uJGlucHV0LnZhbCgpKSxcbiAgICAgICAgejogcGFyc2VGbG9hdCh0aGlzLnJvd1JvdGF0aW9uLmNoaWxkcmVuWzJdLiRpbnB1dC52YWwoKSksXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgbmV3IGZpbGUgdXBsb2FkZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gbW9kZWwuXG4gICAqL1xuICBoYW5kbGVGaWxlVXBsb2FkZWQocGF0aCkge1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHBhdGguc3BsaXQoJyMnKS5zbGljZSgwLCAtMSkuam9pbignIycpLnNwbGl0KCcuJykuc2xpY2UoLTEpWzBdLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBPbmx5IGdsdGYgc3VwcG9ydGVkXG4gICAgaWYgKHRoaXMuZmllbGQudGhyZWVETW9kZWxMb2FkZXIuZmlsZVR5cGVFeHRlbnNpb25zLmluZGV4T2YoZXh0ZW5zaW9uKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuJGVycm9ycy5hcHBlbmQoSDVQRWRpdG9yLmNyZWF0ZUVycm9yKEg1UEVkaXRvci50KCdINVBFZGl0b3IuVGhyZWVETW9kZWxMb2FkZXInLCAnZmlsZXR5cGVOb3RTdXBwb3J0ZWQnKSkpO1xuICAgICAgdGhpcy5yZW1vdmVGaWxlKCk7XG5cbiAgICAgIGlmICh0aGlzLmNhbkNvbnZlcnQpIHtcbiAgICAgICAgdGhpcy5kcm9wem9uZS5oaWRlKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEdMVEYgZmlsZXMgYXJlIEpTT04gZmlsZXMsIGJ1dCBtYXkgbm90IGJlIGluIGVtYmVkZGVkIGZvcm1hdCB3aXRoIGJhc2U2NFxuICAgICAqIGVuY29kZWQgdGV4dHVyZXMgb3IgYmluIGZpbGVzLiBXb3VsZCByZXF1aXJlIHRvIHVwbG9hZCBhc3NldHMgc2VwYXJhdGVseVxuICAgICAqIGFuZCBlbmNvZGUgdGhlbS4gRm9yIG5vdywgb25seSBhbGxvdyBHTFRGIGluIGVtYmVkZGVkIGZvcm1hdCBhbmQgR0xCLlxuICAgICAqL1xuICAgIGlmIChleHRlbnNpb24gPT09ICdnbHRmJykge1xuICAgICAgLy8gR2V0IHBvdGVudGlhbCBjcm9zcy1vcmlnaW4gc291cmNlXG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBINVAuc2V0U291cmNlKGVsZW1lbnQsIHtwYXRoOiBwYXRofSwgSDVQRWRpdG9yLmNvbnRlbnRJZCk7XG4gICAgICBjb25zdCBzcmMgPSBlbGVtZW50LnNyYztcblxuICAgICAgLy8gVHJ5IHRvIHBhcnNlIEpTT04gZnJvbSBmaWxlXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgLy8gVGhyZWUuSlMgY2Fubm90IGhhbmRsZSBnbFRGIHYxLjAuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNHTFRGVmVyc2lvblR3byhqc29uKSkge1xuICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKEg1UEVkaXRvci50KCdINVBFZGl0b3IuVGhyZWVETW9kZWxMb2FkZXInLCAnb25seVZlcnNpb25Ud28nKSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FuJ3QgdXBsb2FkIG11bHRpcGxlIGZpbGVzIG9yIHppcCBmaWxlcywgb2ZmZXIgY29udmVyc2lvblxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzR0xURkVtYmVkZGVkRm9ybWF0KGpzb24pKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmNhbkNvbnZlcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKEg1UEVkaXRvci50KCdINVBFZGl0b3IuVGhyZWVETW9kZWxMb2FkZXInLCAnb25seUVtYmVkZGVkQXNzZXRzJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRW1iZWRkZWRBc3NldHMoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKEg1UEVkaXRvci50KCdINVBFZGl0b3IuVGhyZWVETW9kZWxMb2FkZXInLCAnYnJvd3NlckNhbm5vdENvbnZlcnQnKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihgJHtINVBFZGl0b3IudCgnSDVQRWRpdG9yLlRocmVlRE1vZGVsTG9hZGVyJywgJ2ZpbGVEYW1hZ2VkJyl9ICgke2Vycm9yfSlgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnNldE1vZGVsKHBhdGgpO1xuICAgICAgICB9O1xuICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoYCR7SDVQRWRpdG9yLnQoJ0g1UEVkaXRvci5UaHJlZURNb2RlbExvYWRlcicsICdmaWxlRGFtYWdlZCcpfSAoJHtlcnJvcn0pYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnNldE1vZGVsKHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZW1iZWRkZWQgYXNzZXRzIHVwbG9hZGVkLlxuICAgKi9cbiAgaGFuZGxlRW1iZWRkZWRBc3NldHMoKSB7XG4gICAgLy8gQWRkIGRyb3B6b25lIHRvIERPTVxuICAgIGlmICh0aGlzLmNhbkNvbnZlcnQpIHtcbiAgICAgIHRoaXMuZHJvcHpvbmUuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY29udmVyc2lvbiBkb25lLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcmVzdWx0IFJlc3VsdC5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtyZXN1bHQuZmlsZV0gRmlsZSBkYXRhLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3VsdC5lcnJvcl0gRXJyb3IgbWVzc2FnZS5cbiAgICovXG4gIGhhbmRsZUNvbnZlcnNpb25Eb25lKHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3IoYCR7SDVQRWRpdG9yLnQoJ0g1UEVkaXRvci5UaHJlZURNb2RlbExvYWRlcicsICdjb252ZXJzaW9uRXJyb3InKX0gKCR7cmVzdWx0LmVycm9yfSlgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBIb3BlIGFsbCdzIHNhbml0aXplZCBoZXJlIHdpdGggdGhlIGZpbGVcbiAgICB0aGlzLmZpZWxkSW5zdGFuY2UudXBsb2FkKHJlc3VsdC5maWxlLCAnZm9vLmdsYicpO1xuXG4gICAgaWYgKHRoaXMuY2FuQ29udmVydCkge1xuICAgICAgdGhpcy5kcm9wem9uZS5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIEpTT04gb2YgR0xURiBmaWxlIGZvciBiZWluZyBlbWJlZGRlZCBmb3JtYXQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBqc29uIEdMVEYgZmlsZSBhcyBKU09OIG9iamVjdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSwgaWYgaXMgZW1iZWRkZWQgZm9ybWF0LCBlbHNlIGZhbHNlLlxuICAgKi9cbiAgaXNHTFRGRW1iZWRkZWRGb3JtYXQoanNvbikge1xuICAgIGNvbnN0IG9iamVjdHMgPSB0aGlzLmZpbmRPYmplY3RzKGpzb24sICd1cmknLCAnJyk7XG4gICAgY29uc3QgY29udGFpbnNFeHRlcm5hbFJlZmVyZW5jZSA9IG9iamVjdHMuc29tZSgob2JqKSA9PiB7XG4gICAgICByZXR1cm4gb2JqLnVyaS5zdWJzdHIoMCwgNSkgIT09ICdkYXRhOic7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gIWNvbnRhaW5zRXh0ZXJuYWxSZWZlcmVuY2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgSlNPTiBvZiBHTFRGIGZpbGUgZm9yIHZlcnNpb24gc3RyaW5ncy5cbiAgICogQHBhcmFtIHtvYmplY3R9IGpzb24gR0xURiBmaWxlIGFzIEpTT04gb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLCBpZiBubyB2ZXJzaW9uIGlzIG9mIDEuMC5cbiAgICovXG4gIGlzR0xURlZlcnNpb25Ud28oanNvbikge1xuICAgIGNvbnN0IG9iamVjdHMgPSB0aGlzLmZpbmRPYmplY3RzKGpzb24sICd2ZXJzaW9uJywgJycpO1xuXG4gICAgY29uc3QgY29udGFpbnNPbmVQb2ludE8gPSBvYmplY3RzLnNvbWUoKG9iaikgPT4ge1xuICAgICAgcmV0dXJuIG9iai52ZXJzaW9uID09PSAnMS4wJztcbiAgICB9KTtcblxuICAgIHJldHVybiAhY29udGFpbnNPbmVQb2ludE87XG4gIH1cblxuICAvKipcbiAgICogR2V0IG9iamVjdHMgd2l0aCBwYXJ0aWN1bGFyIGtleSAoYW5kIHZhbHVlKSBmcm9tIG9iamVjdC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9iaiBPYmplY3QgdG8gc2VhcmNoIGluLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsIFZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqL1xuICBmaW5kT2JqZWN0cyhvYmosIGtleSwgdmFsKSB7XG4gICAgbGV0IG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBpIGluIG9iaikge1xuICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb2JqW2ldID09ICdvYmplY3QnKSB7XG4gICAgICAgIG9iamVjdHMgPSBvYmplY3RzLmNvbmNhdCh0aGlzLmZpbmRPYmplY3RzKG9ialtpXSwga2V5LCB2YWwpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoaSA9PT0ga2V5ICYmIG9ialtpXSA9PT0gdmFsIHx8IGkgPT09IGtleSAmJiB2YWwgPT09ICcnKSB7XG4gICAgICAgICAgb2JqZWN0cy5wdXNoKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JqW2ldID09PSB2YWwgJiYga2V5ID09PSAnJykge1xuICAgICAgICAgIGlmIChvYmplY3RzLmxhc3RJbmRleE9mKG9iaikgPT09IC0xKSB7XG4gICAgICAgICAgICBvYmplY3RzLnB1c2gob2JqKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgZXJyb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvck1lc3NhZ2UgRXJyb3IgbWVzc2FnZSB0ZXh0LlxuICAgKi9cbiAgaGFuZGxlRXJyb3IoZXJyb3JNZXNzYWdlKSB7XG4gICAgdGhpcy4kZXJyb3JzLmVtcHR5KCk7XG4gICAgdGhpcy4kZXJyb3JzLmFwcGVuZChINVBFZGl0b3IuY3JlYXRlRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgdGhpcy5yZW1vdmVGaWxlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGZpbGUgZnJvbSB3aWRnZXQuXG4gICAqL1xuICByZW1vdmVGaWxlKCkge1xuICAgIGRlbGV0ZSB0aGlzLmZpZWxkSW5zdGFuY2UucGFyYW1zO1xuICAgIHRoaXMuZmllbGRJbnN0YW5jZS5zZXRWYWx1ZSh0aGlzLmZpZWxkSW5zdGFuY2UuZmllbGQpO1xuICAgIHRoaXMuZmllbGRJbnN0YW5jZS5hZGRGaWxlKCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmllbGRJbnN0YW5jZS5jaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmZpZWxkSW5zdGFuY2UuY2hhbmdlc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGZpbGUgcHNldWRvIGljb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEZpbGUgdHlwZS5cbiAgICovXG4gIHNob3dGaWxlSWNvbih0eXBlKSB7XG4gICAgLy8gV2FpdCBmb3IgaW1hZ2UuIEZpbGUuYWRkRmlsZSgpIG1pZ2h0IG5vdCBoYXZlIGNvbXBsZXRlZCB5ZXRcbiAgICBjb25zdCB3YWl0Rm9ySW1nID0gKHRpbWVvdXQpID0+IHtcbiAgICAgIHRpbWVvdXQgPSB0aW1lb3V0IHx8IDUwMDtcblxuICAgICAgaWYgKHRpbWVvdXQgPD0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGltZyA9IHRoaXMuZmllbGRJbnN0YW5jZS4kZmlsZS5maW5kKCdpbWcnKS5nZXQoMCk7XG4gICAgICBpZiAoaW1nKSB7XG4gICAgICAgIHRoaXMuZmlsZUljb24udGl0bGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmZpbGVJY29uLmlubmVyVGV4dCA9IHR5cGU7XG4gICAgICAgIGltZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLmZpZWxkSW5zdGFuY2UuJGZpbGUuZmluZCgnLnRodW1ibmFpbCcpLmdldCgwKS5hcHBlbmRDaGlsZCh0aGlzLmZpbGVJY29uKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB3YWl0Rm9ySW1nKHRpbWVvdXQgLSAyMCk7XG4gICAgICAgIH0sIDIwKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2FpdEZvckltZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBmaWVsZCB0byB3cmFwcGVyLiBJbnZva2VkIGJ5IEg1UCBjb3JlLlxuICAgKiBAcGFyYW0ge0g1UC5qUXVlcnl9ICR3cmFwcGVyIFdyYXBwZXIuXG4gICAqL1xuICBhcHBlbmRUbygkd3JhcHBlcikge1xuICAgIHRoaXMuJGNvbnRhaW5lci5hcHBlbmRUbygkd3JhcHBlcik7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgY3VycmVudCB2YWx1ZXMuIEludm9rZWQgYnkgSDVQIGNvcmUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUsIGlmIGN1cnJlbnQgdmFsdWUgaXMgdmFsaWQsIGVsc2UgZmFsc2UuXG4gICAqL1xuICB2YWxpZGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5maWVsZEluc3RhbmNlLnZhbGlkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHNlbGYuIEludm9rZWQgYnkgSDVQIGNvcmUuXG4gICAqL1xuICByZW1vdmUoKSB7XG4gICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZSgpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBUaHJlZURNb2RlbExvYWRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUlBO0FBRUE7QUFIQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBUEE7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scripts/h5peditor-3d-model-loader.js\n");

/***/ }),

/***/ "./src/styles/h5peditor-3d-model-loader.css":
/*!**************************************************!*\
  !*** ./src/styles/h5peditor-3d-model-loader.css ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3R5bGVzL2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXIuY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaDVwLWVkaXRvci0zZC1tb2RlbC1sb2FkZXIvLi9zcmMvc3R5bGVzL2g1cGVkaXRvci0zZC1tb2RlbC1sb2FkZXIuY3NzP2M4MjkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm1hcHBpbmdzIjoiO0FBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/styles/h5peditor-3d-model-loader.css\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/entries/h5peditor-3d-model-loader.js");
/******/ 	
/******/ })()
;